Documentation API Lovable → Monelec CRM
Endpoint attendu
POST https://monelec.net/api/external/requests
Header: X-API-Key: {MONELEC_API_KEY}
Content-Type: application/json
Structure du payload form_complete

{
  "referenceNumber": "REF-XXXXXXXX",
  "lovable_request_id": "uuid-v4",
  "source": "lovable-website",
  "event_type": "form_complete",
  "payment_status": "pending",

  "customer": {
    "civility": "M." | "Mme" | "",
    "first_name": "string",
    "last_name": "string",
    "email": "string",
    "phone": "string (format: 0612345678)",
    "client_type": "particulier" | "professionnel" | "collectivite",
    "company_name": "string | null",
    "siren": "string | null",
    "collectivite_nom": "string | null"
  },

  "project_address": {
    "address": "string (adresse ligne 1)",
    "address2": "string | '' (complément)",
    "city": "string",
    "zip_code": "string (5 chiffres)"
  },

  "billing_address": {
    "address": "string",
    "address2": "string | ''",
    "city": "string",
    "zip_code": "string"
  } | null,

  "request": {
    "type_raccordement": "Raccordement neuf" | "Modification de raccordement" | "Raccordement provisoire" | "Augmentation de puissance" | "Passage en triphasé" | "Installation photovoltaïque" | "Non spécifié",
    "project_type": "Maison individuelle" | "Immeuble collectif" | "Local commercial" | "Bâtiment industriel" | "Exploitation agricole" | "Autre" | "Non spécifié",
    "usage": "residential" | "commercial" | "industrial" | "agricultural" | "Non spécifié",
    "phase": "Monophasé" | "Triphasé" | "Je ne connais pas" | "Non spécifié",
    "power_kva": number | null,
    "is_viabilise": "Oui" | "Non" | "Non spécifié",
    "terrain_viabilise": "Oui" | "Non" | "Non spécifié",
    "desired_start_date": "YYYY-MM-DD" | null,
    "knows_pdl": boolean,
    "pdl": "string (14 chiffres)" | null,
    "puissance_actuelle_kva": number | null
  },

  "notes": "string | null",
  "rgpd_consent": boolean,

  "tracking": {
    "utm_source": "string | null",
    "utm_medium": "string | null",
    "utm_campaign": "string | null",
    "landing_page": "string | null"
  },

  "raw_payload": { /* Copie brute du formulaire original */ }
}
Notes importantes
Champ	Détail
billing_address	null si identique à project_address
is_viabilise / terrain_viabilise	Texte "Oui"/"Non", pas boolean
phase	Texte lisible, pas "monophase"/"triphase"
type_raccordement	Valeur affichée au client, pas valeur normalisée
raw_payload	Backup complet si besoin de champs supplémentaires
