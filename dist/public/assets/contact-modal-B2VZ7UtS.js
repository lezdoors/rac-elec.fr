import{R as y,a as C,r as F,j as e,M as x,X as S,P as g,B as M,d as D,S as E,e as X}from"./index-CtI9_f3l.js";import{u as T,t as z,F as P,a as l,b as o,c as n,d as i,e as c}from"./form-MglrtKeZ.js";import{z as t}from"./index-D4r1jjLZ.js";import{u as q}from"./useMutation-Dnkxsn9W.js";import{D as L,a as R,b as V,d as k,e as B}from"./dialog-DDG5xLFk.js";import{I as u}from"./input-BV2WiPKv.js";import{T as I}from"./textarea-CrFZ3MeK.js";import{U as f}from"./user-Ctb2pYsz.js";import{M as U}from"./message-square-C5Ob8GPv.js";import{C as _}from"./calendar-CnKzgrNk.js";import{C as A}from"./circle-check-big-BFwvq5Tr.js";import"./label-Do6r1Bqs.js";import"./index-X7hvRruK.js";const G=t.object({name:t.string().min(2,"Le nom doit contenir au moins 2 caractères"),email:t.string().email("Veuillez entrer une adresse email valide"),phone:t.string().optional(),message:t.string().min(10,"Le message doit contenir au moins 10 caractères")});function le({trigger:h,defaultOpen:a,onOpenChange:b,source:v="contact_form"}){const[N,j]=y.useState(a||!1),{toast:p}=C(),m=s=>{j(s),b&&b(s)};F.useEffect(()=>{a!==void 0&&j(a)},[a]);const r=T({resolver:z(G),defaultValues:{name:"",email:"",phone:"",message:""}}),d=q({mutationFn:async s=>(await X("POST","/api/contact",{...s,source:v})).json(),onSuccess:()=>{p({title:"Message envoyé",description:"Nous avons bien reçu votre message et nous vous répondrons dans les plus brefs délais."}),r.reset(),m(!1)},onError:s=>{p({title:"Erreur",description:"Une erreur est survenue lors de l'envoi du message. Veuillez réessayer plus tard.",variant:"destructive"})}}),w=s=>{d.mutate(s)};return e.jsxs(L,{open:N,onOpenChange:m,children:[h&&e.jsx(R,{asChild:!0,children:h}),e.jsxs(V,{className:"sm:max-w-[550px] rounded-xl overflow-hidden p-0 max-h-[90vh] contact-modal-content dialog-content-custom",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(x,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx(k,{className:"text-2xl font-bold text-white",children:"Contactez-nous"}),e.jsx(B,{className:"text-blue-100 mt-1",children:"Réponse garantie sous 24h ouvrées"})]})]}),e.jsx("button",{onClick:()=>m(!1),className:"rounded-full h-8 w-8 flex items-center justify-center bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(S,{className:"h-4 w-4 text-white"})})]})}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh] p-6",children:e.jsx(P,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(w),className:"space-y-5",children:[e.jsx(l,{control:r.control,name:"name",render:({field:s})=>e.jsxs(o,{children:[e.jsxs(n,{className:"font-medium flex items-center text-blue-800",children:[e.jsx(f,{className:"h-4 w-4 mr-2 text-blue-600"}),"Nom complet ",e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsx(i,{children:e.jsxs("div",{className:"relative",children:[e.jsx(u,{placeholder:"Votre nom",...s,className:"bg-blue-50/50 border-blue-100 focus-visible:ring-blue-500 rounded-md pl-10"}),e.jsx(f,{className:"absolute left-3 top-2.5 h-5 w-5 text-blue-400"})]})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"email",render:({field:s})=>e.jsxs(o,{children:[e.jsxs(n,{className:"font-medium flex items-center text-blue-800",children:[e.jsx(x,{className:"h-4 w-4 mr-2 text-blue-600"}),"Email ",e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsx(i,{children:e.jsxs("div",{className:"relative",children:[e.jsx(u,{placeholder:"votreadresse@email.com",type:"email",...s,className:"bg-blue-50/50 border-blue-100 focus-visible:ring-blue-500 rounded-md pl-10"}),e.jsx(x,{className:"absolute left-3 top-2.5 h-5 w-5 text-blue-400"})]})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"phone",render:({field:s})=>e.jsxs(o,{children:[e.jsxs(n,{className:"font-medium flex items-center text-blue-800",children:[e.jsx(g,{className:"h-4 w-4 mr-2 text-blue-600"}),"Téléphone"]}),e.jsx(i,{children:e.jsxs("div",{className:"relative",children:[e.jsx(u,{placeholder:"06 XX XX XX XX",type:"tel",...s,className:"bg-blue-50/50 border-blue-100 focus-visible:ring-blue-500 rounded-md pl-10"}),e.jsx(g,{className:"absolute left-3 top-2.5 h-5 w-5 text-blue-400"})]})}),e.jsx(c,{})]})}),e.jsx(l,{control:r.control,name:"message",render:({field:s})=>e.jsxs(o,{children:[e.jsxs(n,{className:"font-medium flex items-center text-blue-800",children:[e.jsx(U,{className:"h-4 w-4 mr-2 text-blue-600"}),"Message ",e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),e.jsx(i,{children:e.jsx(I,{placeholder:"Décrivez votre projet ou votre question ici...",className:"resize-none h-32 bg-blue-50/50 border-blue-100 focus-visible:ring-blue-500 rounded-md",...s})}),e.jsx(c,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"rounded-lg bg-gradient-to-br from-blue-50 to-sky-50 p-3 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-blue-700 text-sm mb-1",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("p",{className:"font-medium",children:"Service client prioritaire"})]}),e.jsxs("p",{className:"text-xs text-blue-700 pl-6",children:["Lun-Ven: 9h - 18h",e.jsx("br",{}),"Toutes vos questions sur le raccordement Enedis"]})]}),e.jsxs("div",{className:"rounded-lg bg-gradient-to-br from-green-50 to-blue-50 p-3 border border-green-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-green-700 text-sm mb-1",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("p",{className:"font-medium",children:"Service de qualité"})]}),e.jsxs("p",{className:"text-xs text-green-700 pl-6",children:["Plus de 10 000 clients satisfaits",e.jsx("br",{}),"Délai de traitement réduit de 60%"]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(M,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg shadow-md py-6",disabled:d.isPending,children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-5 w-5 mr-2 animate-spin"}),"Envoi en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-5 w-5 mr-2"}),"Envoyer ma demande"]})})})]})})})]})]})}export{le as ContactModal};
