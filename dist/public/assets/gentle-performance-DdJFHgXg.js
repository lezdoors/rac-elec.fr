class o{constructor(){this.isInitialized=!1,this.observer=null}static getInstance(){return o.instance||(o.instance=new o),o.instance}init(){this.isInitialized||typeof window>"u"||(this.isInitialized=!0,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.initOptimizations()):this.initOptimizations())}initOptimizations(){this.optimizeImages(),this.setupProgressiveLoading(),this.optimizeFonts(),this.setupCriticalPathOptimization()}optimizeImages(){const e=document.querySelectorAll('img[loading="lazy"]');this.observer=new IntersectionObserver(s=>{s.forEach(t=>{var i;if(t.isIntersecting){const n=t.target;n.complete?n.classList.add("loaded"):n.addEventListener("load",()=>n.classList.add("loaded"),{once:!0}),(i=this.observer)==null||i.unobserve(n)}})},{rootMargin:"50px 0px",threshold:.1}),e.forEach(s=>{var t;return(t=this.observer)==null?void 0:t.observe(s)})}setupProgressiveLoading(){const e=document.querySelector(".hero-section");e&&e.classList.add("above-fold"),document.querySelectorAll("section, .service-card, .footer").forEach((t,i)=>{i>1&&t.classList.add("below-fold")})}optimizeFonts(){"fonts"in document&&document.fonts.ready.then(()=>{document.body.classList.add("fonts-loaded")})}setupCriticalPathOptimization(){document.querySelectorAll("h1, .hero-content, img, video").forEach(t=>{t.setAttribute("data-lcp-target","true")}),document.querySelectorAll("input, textarea, select").forEach(t=>{t.setAttribute("autocomplete","on")})}optimizeComponent(e){e.querySelectorAll('img[loading="lazy"]').forEach(t=>{var i;return(i=this.observer)==null?void 0:i.observe(t)}),e.classList.add("performance-optimized")}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.isInitialized=!1}}const a=o.getInstance();typeof window<"u"&&a.init();export{a as gentlePerformance};
