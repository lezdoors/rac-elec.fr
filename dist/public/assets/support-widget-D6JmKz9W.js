import{c as g,r,j as e,X as p,p as x,M as f,A as j,P as v,aQ as N,o as w}from"./index-LWpVvRBK.js";import{S as u}from"./shield-DMTwZ-zh.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=g("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),y=()=>{const[d,a]=r.useState(!1),[l,n]=r.useState(!1);return r.useEffect(()=>{const s=()=>{a(window.innerWidth<=768)};s(),window.addEventListener("resize",s);const i=setTimeout(()=>n(!0),100);return()=>{window.removeEventListener("resize",s),clearTimeout(i)}},[]),{isMobile:d,isPageLoaded:l}},k=()=>{const[d,a]=r.useState(!1),[l,n]=r.useState("main"),[s,i]=r.useState({email:"",phone:"",message:""}),{isMobile:o,isPageLoaded:m}=y();r.useEffect(()=>{if(!m)return;const c=setTimeout(()=>{document.querySelector("input:focus, textarea:focus, select:focus")||a(!0)},o?6e3:3e3);return()=>clearTimeout(c)},[o,m]);const b=async t=>{t.preventDefault();try{await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,source:"support_widget",timestamp:new Date().toISOString()})}),n("success")}catch(c){console.error("Erreur envoi lead:",c)}};return d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40",onClick:()=>a(!1)}),e.jsx("div",{className:"fixed bottom-6 right-6 z-50 w-96 max-w-[calc(100vw-2rem)]",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden transform transition-all duration-500 animate-in slide-in-from-bottom-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 to-transparent"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(h,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Support Portail Enedis"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Notre équipe de spécialistes est disponible"})]})]}),e.jsx("button",{onClick:()=>a(!1),className:"text-white/80 hover:text-white transition-colors p-1",children:e.jsx(p,{className:"w-5 h-5"})})]})]}),l==="main"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["Besoin d'aide avec votre raccordement électrique ?",e.jsx("span",{className:"font-semibold text-blue-600",children:" Assistance personnalisée."})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Réponse sous 2h"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"100% Sécurisé"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"font-bold text-blue-700",children:"+10,000"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Clients satisfaits"})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"font-bold text-green-700",children:"98%"}),e.jsx("div",{className:"text-xs text-green-600",children:"Taux de réussite"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>n("contact"),className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-blue-500/25 flex items-center justify-center gap-2",children:[e.jsx(f,{className:"w-5 h-5"}),"Obtenir de l'aide",e.jsx(j,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:()=>window.open("tel:+33123456789","_self"),className:"w-full bg-green-600 text-white p-4 rounded-xl font-semibold hover:bg-green-700 transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-green-500/25 flex items-center justify-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Appeler maintenant"]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex text-yellow-500",children:[...Array(5)].map((t,c)=>e.jsx(N,{className:"w-4 h-4 fill-current"},c))}),e.jsx("span",{className:"text-sm font-medium",children:"4.9/5"})]}),e.jsxs("p",{className:"text-xs text-gray-600 italic",children:['"Support exceptionnel ! Mon raccordement a été traité rapidement et sans problème."',e.jsx("span",{className:"font-medium",children:" - Marie L."})]})]})]}),l==="contact"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Contactez nos experts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Réponse garantie sous 24h ouvrées"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:s.email,onChange:t=>i({...s,email:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"votre@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone"}),e.jsx("input",{type:"tel",value:s.phone,onChange:t=>i({...s,phone:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"06 XX XX XX XX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message *"}),e.jsx("textarea",{required:!0,value:s.message,onChange:t=>i({...s,message:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 h-24 resize-none",placeholder:"Décrivez votre projet ou votre question..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>n("main"),className:"px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Retour"}),e.jsx("button",{type:"submit",className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Envoyer"})]})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(u,{className:"w-5 h-5 text-green-500 mx-auto mb-1"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Sécurisé"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(x,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Réponse rapide"})]})]})]}),l==="success"&&e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(w,{className:"w-8 h-8 text-green-600"})}),e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Message envoyé !"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Nos experts vous recontacteront sous 24h pour vous accompagner dans votre projet."}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"En attendant :"})," Consultez notre guide complet du raccordement électrique"]})}),e.jsx("button",{onClick:()=>a(!1),className:"w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Fermer"})]})]})})]}):e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs("button",{onClick:()=>a(!0),className:`group bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-full shadow-2xl hover:shadow-blue-500/25 transition-all duration-300 transform hover:scale-110 ${o?"animate-none":"animate-bounce"}`,style:{willChange:o?"auto":"transform",backfaceVisibility:"hidden",transform:"translateZ(0)"},children:[e.jsx(h,{className:"w-6 h-6"}),e.jsx("div",{className:`absolute -top-2 -right-2 w-4 h-4 bg-red-500 rounded-full ${o?"animate-none":"animate-pulse"}`})]})})};export{k as SupportWidget};
