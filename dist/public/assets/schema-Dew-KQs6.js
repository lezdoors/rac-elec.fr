var Hi=Object.defineProperty;var Yi=(t,e,r)=>e in t?Hi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var s=(t,e,r)=>Yi(t,typeof e!="symbol"?e+"":e,r);import{br as Wi,bs as ki,bt as ea,bu as ta,bv as ra,bw as na,bx as sa,by as te,bz as ia,bA as aa,bB as oa,bC as la,bD as ua,bE as ca,bF as da,bG as ma,bH as pa,bI as de,bJ as ga,bK as fa,bL as ya,bM as ha,bN as ba,bO as _a,bP as Na,bQ as Ta,bR as Sa,bS as Pa,bT as wa,bU as Ia,bV as Aa,bW as xa,bX as Da,bY as Ca,bZ as va,b_ as Ea,b$ as Ba,c0 as qa,c1 as La,c2 as Va,c3 as Ma,c4 as za,c5 as Fa,c6 as Ua,c7 as Qa,c8 as ja,c9 as Ra,ca as Oa,cb as $a,cc as O,cd as le,ce as Za,p as M,cf as Ka,cg as ns,ch as ie,ci as Ga,cj as Xa,ck as Ja,cl as me,H as v,cm as Ha,cn as Ya,co as Wa,cp as ka,cq as eo,cr as to,cs as ro,ct as no,cu as so,cv as io,cw as ao,cx as N,cy as oo,cz as lo,cA as uo,cB as co,cC as mo,cD as ss,cE as po,q as L,o as k,cF as go,cG as fo,cH as yo,cI as ho,cJ as bo,cK as _o,cL as No,cM as To,cN as So,cO as is,cP as Po,cQ as wo,cR as Io,s as d,cS as Ao,cT as xo,cU as Do,cV as ee,cW as Co,cX as vo,cY as Eo}from"./index-C49_B6j6.js";const Bo=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Wi,DIRTY:ki,EMPTY_PATH:ea,INVALID:ta,NEVER:ra,OK:na,ParseStatus:sa,Schema:te,ZodAny:ia,ZodArray:aa,ZodBigInt:oa,ZodBoolean:la,ZodBranded:ua,ZodCatch:ca,ZodDate:da,ZodDefault:ma,ZodDiscriminatedUnion:pa,ZodEffects:de,ZodEnum:ga,ZodError:fa,get ZodFirstPartyTypeKind(){return ya},ZodFunction:ha,ZodIntersection:ba,ZodIssueCode:_a,ZodLazy:Na,ZodLiteral:Ta,ZodMap:Sa,ZodNaN:Pa,ZodNativeEnum:wa,ZodNever:Ia,ZodNull:Aa,ZodNullable:xa,ZodNumber:Da,ZodObject:Ca,ZodOptional:va,ZodParsedType:Ea,ZodPipeline:Ba,ZodPromise:qa,ZodReadonly:La,ZodRecord:Va,ZodSchema:te,ZodSet:Ma,ZodString:za,ZodSymbol:Fa,ZodTransformer:de,ZodTuple:Ua,ZodType:te,ZodUndefined:Qa,ZodUnion:ja,ZodUnknown:Ra,ZodVoid:Oa,addIssueToContext:$a,any:O,array:le,bigint:Za,boolean:M,coerce:Ka,custom:ns,date:ie,datetimeRegex:Ga,defaultErrorMap:Xa,discriminatedUnion:Ja,effect:me,enum:v,function:Ha,getErrorMap:Ya,getParsedType:Wa,instanceof:ka,intersection:eo,isAborted:to,isAsync:ro,isDirty:no,isValid:so,late:io,lazy:ao,literal:N,makeIssue:oo,map:lo,nan:uo,nativeEnum:co,never:mo,null:ss,nullable:po,number:L,object:k,get objectUtil(){return go},oboolean:fo,onumber:yo,optional:ho,ostring:bo,pipeline:_o,preprocess:No,promise:To,quotelessJson:So,record:is,set:Po,setErrorMap:wo,strictObject:Io,string:d,symbol:Ao,transformer:me,tuple:xo,undefined:Do,union:ee,unknown:Co,get util(){return vo},void:Eo},Symbol.toStringTag,{value:"Module"})),a=Symbol.for("drizzle:entityKind");function x(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,a))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(a in r&&r[a]===e[a])return!0;r=Object.getPrototypeOf(r)}return!1}var Ne;Ne=a;class Q{constructor(e,r){s(this,"name");s(this,"keyAsName");s(this,"primary");s(this,"notNull");s(this,"default");s(this,"defaultFn");s(this,"onUpdateFn");s(this,"hasDefault");s(this,"isUnique");s(this,"uniqueName");s(this,"uniqueType");s(this,"dataType");s(this,"columnType");s(this,"enumValues");s(this,"generated");s(this,"generatedIdentity");s(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}s(Q,Ne,"Column");var Te;Te=a;class as{constructor(e,r,n){s(this,"config");s(this,"$default",this.$defaultFn);s(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}s(as,Te,"ColumnBuilder");const F=Symbol.for("drizzle:Name");var Se;Se=a;class os{constructor(e,r){s(this,"reference");s(this,"_onUpdate","no action");s(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:o,foreignColumns:l}=e();return{name:n,columns:o,foreignTable:l[0].table,foreignColumns:l}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new ls(e,this)}}s(os,Se,"PgForeignKeyBuilder");var Pe;Pe=a;class ls{constructor(e,r){s(this,"reference");s(this,"onUpdate");s(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),o=r.map(h=>h.name),l=n.map(h=>h.name),c=[this.table[F],...o,n[0].table[F],...l];return e??`${c.join("_")}_fk`}}s(ls,Pe,"PgForeignKey");function qo(t,...e){return t(...e)}function Lo(t,e){return`${t[F]}_${e.join("_")}_unique`}function pe(t,e,r){for(let n=e;n<t.length;n++){const o=t[n];if(o==="\\"){n++;continue}if(o==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(o===","||o==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function us(t,e=0){const r=[];let n=e,o=!1;for(;n<t.length;){const l=t[n];if(l===","){(o||n===e)&&r.push(""),o=!0,n++;continue}if(o=!1,l==="\\"){n+=2;continue}if(l==='"'){const[y,_]=pe(t,n+1,!0);r.push(y),n=_;continue}if(l==="}")return[r,n+1];if(l==="{"){const[y,_]=us(t,n+1);r.push(y),n=_;continue}const[c,h]=pe(t,n,!1);r.push(c),n=h}return[r,n]}function Vo(t){const[e]=us(t,1);return e}function cs(t){return`{${t.map(e=>Array.isArray(e)?cs(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var we,Ie;class f extends(Ie=as,we=a,Ie){constructor(){super(...arguments);s(this,"foreignKeyConfigs",[])}array(r){return new ms(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:o,actions:l})=>qo((c,h)=>{const y=new os(()=>{const _=c();return{columns:[r],foreignColumns:[_]}});return h.onUpdate&&y.onUpdate(h.onUpdate),h.onDelete&&y.onDelete(h.onDelete),y.build(n)},o,l))}buildExtraConfigColumn(r){return new ds(r,this.config)}}s(f,we,"PgColumnBuilder");var Ae,xe;class p extends(xe=Q,Ae=a,xe){constructor(e,r){r.uniqueName||(r.uniqueName=Lo(e,[r.name])),super(e,r),this.table=e}}s(p,Ae,"PgColumn");var De,Ce;class ds extends(Ce=p,De=a,Ce){constructor(){super(...arguments);s(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});s(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}s(ds,De,"ExtraConfigColumn");var ve,Ee;class ms extends(Ee=f,ve=a,Ee){constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new ae(e,this.config,r)}}s(ms,ve,"PgArrayBuilder");var Be,qe;const W=class W extends(qe=p,Be=a,qe){constructor(r,n,o,l){super(r,n);s(this,"size");this.baseColumn=o,this.range=l,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=Vo(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const o=r.map(l=>l===null?null:x(this.baseColumn,W)?this.baseColumn.mapToDriverValue(l,!0):this.baseColumn.mapToDriverValue(l));return n?o:cs(o)}};s(W,Be,"PgArray");let ae=W;const ge=Symbol.for("drizzle:isPgEnum");function Mo(t){return!!t&&typeof t=="function"&&ge in t&&t[ge]===!0}var Le;Le=a;class ue{constructor(e,r,n,o=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:o}}}s(ue,Le,"Subquery");const zo={startActiveSpan(t,e){return e()}},U=Symbol.for("drizzle:ViewBaseConfig"),re=Symbol.for("drizzle:Schema"),fe=Symbol.for("drizzle:Columns"),ye=Symbol.for("drizzle:ExtraConfigColumns"),ne=Symbol.for("drizzle:OriginalName"),se=Symbol.for("drizzle:BaseName"),G=Symbol.for("drizzle:IsAlias"),he=Symbol.for("drizzle:ExtraConfigBuilder"),ps=Symbol.for("drizzle:IsDrizzleTable");var Ve,Me,ze,Fe,Ue,Qe,je,Re,Oe,$e;$e=a,Oe=F,Re=ne,je=re,Qe=fe,Ue=ye,Fe=se,ze=G,Me=ps,Ve=he;class D{constructor(e,r,n){s(this,Oe);s(this,Re);s(this,je);s(this,Qe);s(this,Ue);s(this,Fe);s(this,ze,!1);s(this,Me,!0);s(this,Ve);this[F]=this[ne]=e,this[re]=r,this[se]=n}}s(D,$e,"Table"),s(D,"Symbol",{Name:F,Schema:re,OriginalName:ne,Columns:fe,ExtraConfigColumns:ye,BaseName:se,IsAlias:G,ExtraConfigBuilder:he});function gs(t){return typeof t=="object"&&t!==null&&ps in t}function Fo(t){return t!=null&&typeof t.getSQL=="function"}function Uo(t){var r;const e={sql:"",params:[]};for(const n of t)e.sql+=n.sql,e.params.push(...n.params),(r=n.typings)!=null&&r.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var Ze;Ze=a;class B{constructor(e){s(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new w([this])}}s(B,Ze,"StringChunk");var Ke;Ke=a;const z=class z{constructor(e){s(this,"decoder",fs);s(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return zo.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r==null||r.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:o,escapeName:l,escapeParam:c,prepareTyping:h,inlineParams:y,paramStartIndex:_}=n;return Uo(e.map(u=>{var V;if(x(u,B))return{sql:u.value.join(""),params:[]};if(x(u,X))return{sql:l(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const b=[new B("(")];for(const[I,Ji]of u.entries())b.push(Ji),I<u.length-1&&b.push(new B(", "));return b.push(new B(")")),this.buildQueryFromSourceParams(b,n)}if(x(u,z))return this.buildQueryFromSourceParams(u.queryChunks,{...n,inlineParams:y||u.shouldInlineParams});if(x(u,D)){const b=u[D.Symbol.Schema],I=u[D.Symbol.Name];return{sql:b===void 0||u[G]?l(I):l(b)+"."+l(I),params:[]}}if(x(u,Q)){const b=o.getColumnCasing(u);if(r.invokeSource==="indexes")return{sql:l(b),params:[]};const I=u.table[D.Symbol.Schema];return{sql:u.table[G]||I===void 0?l(u.table[D.Symbol.Name])+"."+l(b):l(I)+"."+l(u.table[D.Symbol.Name])+"."+l(b),params:[]}}if(x(u,bs)){const b=u[U].schema,I=u[U].name;return{sql:b===void 0||u[U].isAlias?l(I):l(b)+"."+l(I),params:[]}}if(x(u,ce)){if(x(u.value,H))return{sql:c(_.value++,u),params:[u],typings:["none"]};const b=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(x(b,z))return this.buildQueryFromSourceParams([b],n);if(y)return{sql:this.mapInlineParam(b,n),params:[]};let I=["none"];return h&&(I=[h(u.encoder)]),{sql:c(_.value++,b),params:[b],typings:I}}return x(u,H)?{sql:c(_.value++,u),params:[u],typings:["none"]}:x(u,z.Aliased)&&u.fieldAlias!==void 0?{sql:l(u.fieldAlias),params:[]}:x(u,ue)?u._.isWith?{sql:l(u._.alias),params:[]}:this.buildQueryFromSourceParams([new B("("),u._.sql,new B(") "),new X(u._.alias)],n):Mo(u)?u.schema?{sql:l(u.schema)+"."+l(u.enumName),params:[]}:{sql:l(u.enumName),params:[]}:Fo(u)?(V=u.shouldOmitSQLParens)!=null&&V.call(u)?this.buildQueryFromSourceParams([u.getSQL()],n):this.buildQueryFromSourceParams([new B("("),u.getSQL(),new B(")")],n):y?{sql:this.mapInlineParam(u,n),params:[]}:{sql:c(_.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new z.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};s(z,Ke,"SQL");let w=z;var Ge;Ge=a;class X{constructor(e){s(this,"brand");this.value=e}getSQL(){return new w([this])}}s(X,Ge,"Name");const fs={mapFromDriverValue:t=>t},ys={mapToDriverValue:t=>t};({...fs,...ys});var Xe;Xe=a;class ce{constructor(e,r=ys){s(this,"brand");this.value=e,this.encoder=r}getSQL(){return new w([this])}}s(ce,Xe,"Param");function J(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new B(t[0]));for(const[n,o]of e.entries())r.push(o,new B(t[n+1]));return new w(r)}(t=>{function e(){return new w([])}t.empty=e;function r(y){return new w(y)}t.fromList=r;function n(y){return new w([new B(y)])}t.raw=n;function o(y,_){const u=[];for(const[V,b]of y.entries())V>0&&_!==void 0&&u.push(_),u.push(b);return new w(u)}t.join=o;function l(y){return new X(y)}t.identifier=l;function c(y){return new H(y)}t.placeholder=c;function h(y,_){return new ce(y,_)}t.param=h})(J||(J={}));(t=>{var r;r=a;const n=class n{constructor(l,c){s(this,"isSelectionField",!1);this.sql=l,this.fieldAlias=c}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};s(n,r,"SQL.Aliased");let e=n;t.Aliased=e})(w||(w={}));var Je;Je=a;class H{constructor(e){this.name=e}getSQL(){return new w([this])}}s(H,Je,"Placeholder");const hs=Symbol.for("drizzle:IsDrizzleView");var He,Ye,We;We=a,Ye=U,He=hs;class bs{constructor({name:e,schema:r,selectedFields:n,query:o}){s(this,Ye);s(this,He,!0);this[U]={name:e,originalName:e,schema:r,selectedFields:n,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new w([this])}}s(bs,We,"View");function Qo(t){return typeof t=="object"&&t!==null&&hs in t}Q.prototype.getSQL=function(){return new w([this])};D.prototype.getSQL=function(){return new w([this])};ue.prototype.getSQL=function(){return new w([this])};function jo(t){return t[D.Symbol.Columns]}function Ro(t){return t[U].selectedFields}function A(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var ke,et;class $ extends(et=f,ke=a,et){generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}s($,ke,"PgIntColumnBaseBuilder");var tt,rt;class _s extends(rt=$,tt=a,rt){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Ns(e,this.config)}}s(_s,tt,"PgBigInt53Builder");var nt,st;class Ns extends(st=p,nt=a,st){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(Ns,nt,"PgBigInt53");var it,at;class Ts extends(at=$,it=a,at){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Ss(e,this.config)}}s(Ts,it,"PgBigInt64Builder");var ot,lt;class Ss extends(lt=p,ot=a,lt){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}s(Ss,ot,"PgBigInt64");function Oo(t,e){const{name:r,config:n}=A(t,e);return n.mode==="number"?new _s(r):new Ts(r)}var ut,ct;class Ps extends(ct=f,ut=a,ct){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ws(e,this.config)}}s(Ps,ut,"PgBigSerial53Builder");var dt,mt;class ws extends(mt=p,dt=a,mt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(ws,dt,"PgBigSerial53");var pt,gt;class Is extends(gt=f,pt=a,gt){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new As(e,this.config)}}s(Is,pt,"PgBigSerial64Builder");var ft,yt;class As extends(yt=p,ft=a,yt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}s(As,ft,"PgBigSerial64");function $o(t,e){const{name:r,config:n}=A(t,e);return n.mode==="number"?new Ps(r):new Is(r)}var ht,bt;class xs extends(bt=f,ht=a,bt){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Ds(e,this.config)}}s(xs,ht,"PgBooleanBuilder");var _t,Nt;class Ds extends(Nt=p,_t=a,Nt){getSQLType(){return"boolean"}}s(Ds,_t,"PgBoolean");function P(t){return new xs(t??"")}var Tt,St;class Cs extends(St=f,Tt=a,St){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new vs(e,this.config)}}s(Cs,Tt,"PgCharBuilder");var Pt,wt;class vs extends(wt=p,Pt=a,wt){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}s(vs,Pt,"PgChar");function Zo(t,e={}){const{name:r,config:n}=A(t,e);return new Cs(r,n)}var It,At;class Es extends(At=f,It=a,At){constructor(e){super(e,"string","PgCidr")}build(e){return new Bs(e,this.config)}}s(Es,It,"PgCidrBuilder");var xt,Dt;class Bs extends(Dt=p,xt=a,Dt){getSQLType(){return"cidr"}}s(Bs,xt,"PgCidr");function Ko(t){return new Es(t??"")}var Ct,vt;class qs extends(vt=f,Ct=a,vt){constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new Ls(e,this.config)}}s(qs,Ct,"PgCustomColumnBuilder");var Et,Bt;class Ls extends(Bt=p,Et=a,Bt){constructor(r,n){super(r,n);s(this,"sqlName");s(this,"mapTo");s(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}s(Ls,Et,"PgCustomColumn");function Go(t){return(e,r)=>{const{name:n,config:o}=A(e,r);return new qs(n,o,t)}}var qt,Lt;class j extends(Lt=f,qt=a,Lt){defaultNow(){return this.default(J`now()`)}}s(j,qt,"PgDateColumnBaseBuilder");var Vt,Mt;class Vs extends(Mt=j,Vt=a,Mt){constructor(e){super(e,"date","PgDate")}build(e){return new Ms(e,this.config)}}s(Vs,Vt,"PgDateBuilder");var zt,Ft;class Ms extends(Ft=p,zt=a,Ft){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}s(Ms,zt,"PgDate");var Ut,Qt;class zs extends(Qt=j,Ut=a,Qt){constructor(e){super(e,"string","PgDateString")}build(e){return new Fs(e,this.config)}}s(zs,Ut,"PgDateStringBuilder");var jt,Rt;class Fs extends(Rt=p,jt=a,Rt){getSQLType(){return"date"}}s(Fs,jt,"PgDateString");function Xo(t,e){const{name:r,config:n}=A(t,e);return(n==null?void 0:n.mode)==="date"?new Vs(r):new zs(r)}var Ot,$t;class Us extends($t=f,Ot=a,$t){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Qs(e,this.config)}}s(Us,Ot,"PgDoublePrecisionBuilder");var Zt,Kt;class Qs extends(Kt=p,Zt=a,Kt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}s(Qs,Zt,"PgDoublePrecision");function K(t){return new Us(t??"")}var Gt,Xt;class js extends(Xt=f,Gt=a,Xt){constructor(e){super(e,"string","PgInet")}build(e){return new Rs(e,this.config)}}s(js,Gt,"PgInetBuilder");var Jt,Ht;class Rs extends(Ht=p,Jt=a,Ht){getSQLType(){return"inet"}}s(Rs,Jt,"PgInet");function Jo(t){return new js(t??"")}var Yt,Wt;class Os extends(Wt=$,Yt=a,Wt){constructor(e){super(e,"number","PgInteger")}build(e){return new $s(e,this.config)}}s(Os,Yt,"PgIntegerBuilder");var kt,er;class $s extends(er=p,kt=a,er){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}s($s,kt,"PgInteger");function m(t){return new Os(t??"")}var tr,rr;class Zs extends(rr=f,tr=a,rr){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new Ks(e,this.config)}}s(Zs,tr,"PgIntervalBuilder");var nr,sr;class Ks extends(sr=p,nr=a,sr){constructor(){super(...arguments);s(this,"fields",this.config.intervalConfig.fields);s(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}s(Ks,nr,"PgInterval");function Ho(t,e={}){const{name:r,config:n}=A(t,e);return new Zs(r,n)}var ir,ar;class Gs extends(ar=f,ir=a,ar){constructor(e){super(e,"json","PgJson")}build(e){return new Xs(e,this.config)}}s(Gs,ir,"PgJsonBuilder");var or,lr;class Xs extends(lr=p,or=a,lr){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Xs,or,"PgJson");function Yo(t){return new Gs(t??"")}var ur,cr;class Js extends(cr=f,ur=a,cr){constructor(e){super(e,"json","PgJsonb")}build(e){return new Hs(e,this.config)}}s(Js,ur,"PgJsonbBuilder");var dr,mr;class Hs extends(mr=p,dr=a,mr){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Hs,dr,"PgJsonb");function R(t){return new Js(t??"")}var pr,gr;class Ys extends(gr=f,pr=a,gr){constructor(e){super(e,"array","PgLine")}build(e){return new Ws(e,this.config)}}s(Ys,pr,"PgLineBuilder");var fr,yr;class Ws extends(yr=p,fr=a,yr){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,o]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}s(Ws,fr,"PgLine");var hr,br;class ks extends(br=f,hr=a,br){constructor(e){super(e,"json","PgLineABC")}build(e){return new ei(e,this.config)}}s(ks,hr,"PgLineABCBuilder");var _r,Nr;class ei extends(Nr=p,_r=a,Nr){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}s(ei,_r,"PgLineABC");function Wo(t,e){const{name:r,config:n}=A(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new Ys(r):new ks(r)}var Tr,Sr;class ti extends(Sr=f,Tr=a,Sr){constructor(e){super(e,"string","PgMacaddr")}build(e){return new ri(e,this.config)}}s(ti,Tr,"PgMacaddrBuilder");var Pr,wr;class ri extends(wr=p,Pr=a,wr){getSQLType(){return"macaddr"}}s(ri,Pr,"PgMacaddr");function ko(t){return new ti(t??"")}var Ir,Ar;class ni extends(Ar=f,Ir=a,Ar){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new si(e,this.config)}}s(ni,Ir,"PgMacaddr8Builder");var xr,Dr;class si extends(Dr=p,xr=a,Dr){getSQLType(){return"macaddr8"}}s(si,xr,"PgMacaddr8");function el(t){return new ni(t??"")}var Cr,vr;class ii extends(vr=f,Cr=a,vr){constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new ai(e,this.config)}}s(ii,Cr,"PgNumericBuilder");var Er,Br;class ai extends(Br=p,Er=a,Br){constructor(r,n){super(r,n);s(this,"precision");s(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}s(ai,Er,"PgNumeric");function oi(t,e){const{name:r,config:n}=A(t,e);return new ii(r,n==null?void 0:n.precision,n==null?void 0:n.scale)}const Z=oi;var qr,Lr;class li extends(Lr=f,qr=a,Lr){constructor(e){super(e,"array","PgPointTuple")}build(e){return new ui(e,this.config)}}s(li,qr,"PgPointTupleBuilder");var Vr,Mr;class ui extends(Mr=p,Vr=a,Mr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}s(ui,Vr,"PgPointTuple");var zr,Fr;class ci extends(Fr=f,zr=a,Fr){constructor(e){super(e,"json","PgPointObject")}build(e){return new di(e,this.config)}}s(ci,zr,"PgPointObjectBuilder");var Ur,Qr;class di extends(Qr=p,Ur=a,Qr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}s(di,Ur,"PgPointObject");function tl(t,e){const{name:r,config:n}=A(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new li(r):new ci(r)}function rl(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function be(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let o=0;o<8;o++)n.setUint8(o,t[e+o]);return n.getFloat64(0,!0)}function mi(t){const e=rl(t);let r=0;const n=e[r];r+=1;const o=new DataView(e.buffer),l=o.getUint32(r,n===1);if(r+=4,l&536870912&&(o.getUint32(r,n===1),r+=4),(l&65535)===1){const c=be(e,r);r+=8;const h=be(e,r);return r+=8,[c,h]}throw new Error("Unsupported geometry type")}var jr,Rr;class pi extends(Rr=f,jr=a,Rr){constructor(e){super(e,"array","PgGeometry")}build(e){return new gi(e,this.config)}}s(pi,jr,"PgGeometryBuilder");var Or,$r;class gi extends($r=p,Or=a,$r){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return mi(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}s(gi,Or,"PgGeometry");var Zr,Kr;class fi extends(Kr=f,Zr=a,Kr){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new yi(e,this.config)}}s(fi,Zr,"PgGeometryObjectBuilder");var Gr,Xr;class yi extends(Xr=p,Gr=a,Xr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=mi(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}s(yi,Gr,"PgGeometryObject");function nl(t,e){const{name:r,config:n}=A(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new pi(r):new fi(r)}var Jr,Hr;class hi extends(Hr=f,Jr=a,Hr){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new bi(e,this.config)}}s(hi,Jr,"PgRealBuilder");var Yr,Wr;class bi extends(Wr=p,Yr=a,Wr){constructor(r,n){super(r,n);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}s(bi,Yr,"PgReal");function sl(t){return new hi(t??"")}var kr,en;class _i extends(en=f,kr=a,en){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Ni(e,this.config)}}s(_i,kr,"PgSerialBuilder");var tn,rn;class Ni extends(rn=p,tn=a,rn){getSQLType(){return"serial"}}s(Ni,tn,"PgSerial");function C(t){return new _i(t??"")}var nn,sn;class Ti extends(sn=$,nn=a,sn){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Si(e,this.config)}}s(Ti,nn,"PgSmallIntBuilder");var an,on;class Si extends(on=p,an=a,on){constructor(){super(...arguments);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}s(Si,an,"PgSmallInt");function il(t){return new Ti(t??"")}var ln,un;class Pi extends(un=f,ln=a,un){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new wi(e,this.config)}}s(Pi,ln,"PgSmallSerialBuilder");var cn,dn;class wi extends(dn=p,cn=a,dn){getSQLType(){return"smallserial"}}s(wi,cn,"PgSmallSerial");function al(t){return new Pi(t??"")}var mn,pn;class Ii extends(pn=f,mn=a,pn){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new Ai(e,this.config)}}s(Ii,mn,"PgTextBuilder");var gn,fn;class Ai extends(fn=p,gn=a,fn){constructor(){super(...arguments);s(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}s(Ai,gn,"PgText");function i(t,e={}){const{name:r,config:n}=A(t,e);return new Ii(r,n)}var yn,hn;class xi extends(hn=j,yn=a,hn){constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(e){return new Di(e,this.config)}}s(xi,yn,"PgTimeBuilder");var bn,_n;class Di extends(_n=p,bn=a,_n){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Di,bn,"PgTime");function ol(t,e={}){const{name:r,config:n}=A(t,e);return new xi(r,n.withTimezone??!1,n.precision)}var Nn,Tn;class Ci extends(Tn=j,Nn=a,Tn){constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new vi(e,this.config)}}s(Ci,Nn,"PgTimestampBuilder");var Sn,Pn;class vi extends(Pn=p,Sn=a,Pn){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");s(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));s(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(vi,Sn,"PgTimestamp");var wn,In;class Ei extends(In=j,wn=a,In){constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Bi(e,this.config)}}s(Ei,wn,"PgTimestampStringBuilder");var An,xn;class Bi extends(xn=p,An=a,xn){constructor(r,n){super(r,n);s(this,"withTimezone");s(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Bi,An,"PgTimestampString");function g(t,e={}){const{name:r,config:n}=A(t,e);return(n==null?void 0:n.mode)==="string"?new Ei(r,n.withTimezone??!1,n.precision):new Ci(r,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var Dn,Cn;class qi extends(Cn=f,Dn=a,Cn){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(J`gen_random_uuid()`)}build(e){return new Li(e,this.config)}}s(qi,Dn,"PgUUIDBuilder");var vn,En;class Li extends(En=p,vn=a,En){getSQLType(){return"uuid"}}s(Li,vn,"PgUUID");function Vi(t){return new qi(t??"")}var Bn,qn;class Mi extends(qn=f,Bn=a,qn){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new zi(e,this.config)}}s(Mi,Bn,"PgVarcharBuilder");var Ln,Vn;class zi extends(Vn=p,Ln=a,Vn){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}s(zi,Ln,"PgVarchar");function ll(t,e={}){const{name:r,config:n}=A(t,e);return new Mi(r,n)}var Mn,zn;class Fi extends(zn=f,Mn=a,zn){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Ui(e,this.config)}}s(Fi,Mn,"PgBinaryVectorBuilder");var Fn,Un;class Ui extends(Un=p,Fn=a,Un){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}s(Ui,Fn,"PgBinaryVector");function ul(t,e){const{name:r,config:n}=A(t,e);return new Fi(r,n)}var Qn,jn;class Qi extends(jn=f,Qn=a,jn){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new ji(e,this.config)}}s(Qi,Qn,"PgHalfVectorBuilder");var Rn,On;class ji extends(On=p,Rn=a,On){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(ji,Rn,"PgHalfVector");function cl(t,e){const{name:r,config:n}=A(t,e);return new Qi(r,n)}var $n,Zn;class Ri extends(Zn=f,$n=a,Zn){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Oi(e,this.config)}}s(Ri,$n,"PgSparseVectorBuilder");var Kn,Gn;class Oi extends(Gn=p,Kn=a,Gn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}s(Oi,Kn,"PgSparseVector");function dl(t,e){const{name:r,config:n}=A(t,e);return new Ri(r,n)}var Xn,Jn;class $i extends(Jn=f,Xn=a,Jn){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new Zi(e,this.config)}}s($i,Xn,"PgVectorBuilder");var Hn,Yn;class Zi extends(Yn=p,Hn=a,Yn){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}s(Zi,Hn,"PgVector");function ml(t,e){const{name:r,config:n}=A(t,e);return new $i(r,n)}function pl(){return{bigint:Oo,bigserial:$o,boolean:P,char:Zo,cidr:Ko,customType:Go,date:Xo,doublePrecision:K,inet:Jo,integer:m,interval:Ho,json:Yo,jsonb:R,line:Wo,macaddr:ko,macaddr8:el,numeric:oi,point:tl,geometry:nl,real:sl,serial:C,smallint:il,smallserial:al,text:i,time:ol,timestamp:g,uuid:Vi,varchar:ll,bit:ul,halfvec:cl,sparsevec:dl,vector:ml}}const oe=Symbol.for("drizzle:PgInlineForeignKeys"),_e=Symbol.for("drizzle:EnableRLS");var Wn,kn,es,ts,rs;class Y extends(rs=D,ts=a,es=oe,kn=_e,Wn=D.Symbol.ExtraConfigBuilder,rs){constructor(){super(...arguments);s(this,es,[]);s(this,kn,!1);s(this,Wn)}}s(Y,ts,"PgTable"),s(Y,"Symbol",Object.assign({},D.Symbol,{InlineForeignKeys:oe,EnableRLS:_e}));function gl(t,e,r,n,o=t){const l=new Y(t,n,o),c=typeof e=="function"?e(pl()):e,h=Object.fromEntries(Object.entries(c).map(([u,V])=>{const b=V;b.setName(u);const I=b.build(l);return l[oe].push(...b.buildForeignKeys(I,l)),[u,I]})),y=Object.fromEntries(Object.entries(c).map(([u,V])=>{const b=V;b.setName(u);const I=b.buildExtraConfigColumn(l);return[u,I]})),_=Object.assign(l,h);return _[D.Symbol.Columns]=h,_[D.Symbol.ExtraConfigColumns]=y,Object.assign(_,{enableRLS:()=>(_[Y.Symbol.EnableRLS]=!0,_)})}const E=(t,e,r)=>gl(t,e,r,void 0),T={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function S(t,e){return e.includes(t.columnType)}function fl(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const yl=ee([d(),L(),M(),ss()]),hl=ee([yl,is(O()),le(O())]),bl=ns(t=>t instanceof Buffer);function Ki(t,e){const r=(e==null?void 0:e.zodInstance)??Bo,n=(e==null?void 0:e.coerce)??{};let o;return fl(t)&&(o=t.enumValues.length?r.enum(t.enumValues):r.string()),o||(S(t,["PgGeometry","PgPointTuple"])?o=r.tuple([r.number(),r.number()]):S(t,["PgGeometryObject","PgPointObject"])?o=r.object({x:r.number(),y:r.number()}):S(t,["PgHalfVector","PgVector"])?(o=r.array(r.number()),o=t.dimensions?o.length(t.dimensions):o):S(t,["PgLine"])?o=r.tuple([r.number(),r.number(),r.number()]):S(t,["PgLineABC"])?o=r.object({a:r.number(),b:r.number(),c:r.number()}):S(t,["PgArray"])?(o=r.array(Ki(t.baseColumn,r)),o=t.size?o.length(t.size):o):t.dataType==="array"?o=r.array(r.any()):t.dataType==="number"?o=_l(t,r,n):t.dataType==="bigint"?o=Nl(t,r,n):t.dataType==="boolean"?o=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?o=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?o=Tl(t,r,n):t.dataType==="json"?o=hl:t.dataType==="custom"?o=r.any():t.dataType==="buffer"&&(o=bl)),o||(o=r.any()),o}function _l(t,e,r){let n=t.getSQLType().includes("unsigned"),o,l,c=!1;S(t,["MySqlTinyInt","SingleStoreTinyInt"])?(o=n?0:T.INT8_MIN,l=n?T.INT8_UNSIGNED_MAX:T.INT8_MAX,c=!0):S(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(o=n?0:T.INT16_MIN,l=n?T.INT16_UNSIGNED_MAX:T.INT16_MAX,c=!0):S(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(o=n?0:T.INT24_MIN,l=n?T.INT24_UNSIGNED_MAX:T.INT24_MAX,c=S(t,["MySqlMediumInt","SingleStoreMediumInt"])):S(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(o=n?0:T.INT32_MIN,l=n?T.INT32_UNSIGNED_MAX:T.INT32_MAX,c=!0):S(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(o=n?0:T.INT48_MIN,l=n?T.INT48_UNSIGNED_MAX:T.INT48_MAX):S(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||S(t,["MySqlSerial","SingleStoreSerial"]),o=n?0:Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,c=!0):S(t,["MySqlYear","SingleStoreYear"])?(o=1901,l=2155,c=!0):(o=Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER);let h=r===!0||r!=null&&r.number?e.coerce.number():e.number();return h=h.min(o).max(l),c?h.int():h}function Nl(t,e,r){const n=t.getSQLType().includes("unsigned"),o=n?0n:T.INT64_MIN,l=n?T.INT64_UNSIGNED_MAX:T.INT64_MAX;return(r===!0||r!=null&&r.bigint?e.coerce.bigint():e.bigint()).min(o).max(l)}function Tl(t,e,r){if(S(t,["PgUUID"]))return e.string().uuid();let n,o,l=!1;S(t,["PgVarchar","SQLiteText"])?n=t.length:S(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??T.INT16_UNSIGNED_MAX:S(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=T.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=T.INT24_UNSIGNED_MAX:t.textType==="text"?n=T.INT16_UNSIGNED_MAX:n=T.INT8_UNSIGNED_MAX),S(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,l=!0),S(t,["PgBinaryVector"])&&(o=/^[01]+$/,n=t.dimensions);let c=r===!0||r!=null&&r.string?e.coerce.string():e.string();return c=o?c.regex(o):c,n&&l?c.length(n):n?c.max(n):c}function Gi(t){return gs(t)?jo(t):Ro(t)}function Xi(t,e,r,n){const o={};for(const[l,c]of Object.entries(t)){if(!x(c,Q)&&!x(c,w)&&!x(c,w.Aliased)&&typeof c=="object"){const V=gs(c)||Qo(c)?Gi(c):c;o[l]=Xi(V,e[l]??{},r,n);continue}const h=e[l];if(h!==void 0&&typeof h!="function"){o[l]=h;continue}const y=x(c,Q)?c:void 0,_=y?Ki(y,n):O(),u=typeof h=="function"?h(_):_;r.never(y)||(o[l]=u,y&&(r.nullable(y)&&(o[l]=o[l].nullable()),r.optional(y)&&(o[l]=o[l].optional())))}return k(o)}const Sl={never:t=>{var e,r;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((r=t==null?void 0:t.generatedIdentity)==null?void 0:r.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},q=(t,e)=>{const r=Gi(t);return Xi(r,e??{},Sl)},Pl=E("contacts",{id:C("id").primaryKey(),name:i("name").notNull(),email:i("email").notNull(),phone:i("phone"),message:i("message").notNull(),source:i("source").notNull().default("contact_form"),ipAddress:i("ip_address"),userAgent:i("user_agent"),status:i("status").notNull().default("unread"),priority:i("priority").default("normal"),subject:i("subject"),createdAt:g("created_at").defaultNow().notNull(),readAt:g("read_at"),readBy:m("read_by"),repliedAt:g("replied_at"),repliedBy:m("replied_by")});q(Pl).omit({id:!0,status:!0,createdAt:!0,readAt:!0,readBy:!0,repliedAt:!0,repliedBy:!0});const wl=E("notifications",{id:C("id").primaryKey(),type:i("type").notNull(),title:i("title").notNull(),message:i("message").notNull(),read:P("read").notNull().default(!1),created_at:g("created_at").defaultNow().notNull(),data:R("data")});q(wl).omit({id:!0,created_at:!0});const Il=E("agent_tasks",{id:C("id").primaryKey(),userId:m("user_id").notNull(),title:i("title").notNull(),description:i("description"),dueDate:g("due_date"),priority:i("priority").default("normal"),status:i("status").default("pending"),relatedType:i("related_type"),relatedId:m("related_id"),remindAt:g("remind_at"),reminderSent:P("reminder_sent").default(!1),createdAt:g("created_at").defaultNow().notNull(),updatedAt:g("updated_at"),completedAt:g("completed_at")}),Al=q(Il).omit({id:!0,createdAt:!0,updatedAt:!0,completedAt:!0});Al.extend({title:d().min(3,"Le titre doit contenir au moins 3 caractères"),priority:v(["high","medium","normal","low"],{errorMap:()=>({message:"Priorité invalide"})}).default("normal"),status:v(["pending","in_progress","completed","canceled"],{errorMap:()=>({message:"Statut invalide"})}).default("pending"),dueDate:d().optional().or(ie()).nullable(),remindAt:d().optional().or(ie()).nullable()});E("performance_metrics",{id:C("id").primaryKey(),timestamp:g("timestamp").defaultNow().notNull(),created_at:g("created_at").defaultNow().notNull(),route:i("route").notNull(),loadTime:m("load_time").notNull(),memoryUsage:m("memory_usage"),cpuUsage:Z("cpu_usage",{precision:5,scale:2}),userAgent:i("user_agent"),userId:m("user_id"),statusCode:m("status_code"),requestSize:m("request_size"),responseSize:m("response_size"),serverInfo:R("server_info")});k({route:d(),loadTime:L().int(),memoryUsage:L().int().nullable().optional(),cpuUsage:L().nullable().optional(),userAgent:d().nullable().optional(),userId:L().int().nullable().optional(),statusCode:L().int().nullable().optional(),requestSize:L().int().nullable().optional(),responseSize:L().int().nullable().optional(),serverInfo:O().optional()});const xl=E("users",{id:C("id").primaryKey(),username:i("username").notNull().unique(),password:i("password").notNull(),fullName:i("full_name").default("").notNull(),email:i("email").default("admin@example.com").notNull(),role:i("role").notNull().default("agent"),permissions:R("permissions"),active:P("active").notNull().default(!0),lastLogin:g("last_login"),createdAt:g("created_at").defaultNow().notNull(),createdBy:m("created_by"),onboardingCompleted:P("onboarding_completed").default(!1),smtpHost:i("smtp_host"),smtpPort:m("smtp_port"),smtpSecure:P("smtp_secure").default(!0),smtpUser:i("smtp_user"),smtpPassword:i("smtp_password"),smtpFromEmail:i("smtp_from_email"),smtpEnabled:P("smtp_enabled").default(!1),commissionEnabled:P("commission_enabled").default(!0),commissionRate:Z("commission_rate").default("14")}),Dl=q(xl).pick({username:!0,password:!0,fullName:!0,email:!0,role:!0,active:!0,permissions:!0,smtpHost:!0,smtpPort:!0,smtpSecure:!0,smtpUser:!0,smtpPassword:!0,smtpFromEmail:!0,smtpEnabled:!0,commissionEnabled:!0,commissionRate:!0,onboardingCompleted:!0});Dl.extend({username:d().min(3,"Le nom d'utilisateur doit contenir au moins 3 caractères"),password:d().min(6,"Le mot de passe doit contenir au moins 6 caractères"),fullName:d().min(1,"Le nom complet est requis"),email:d().email("Adresse email invalide"),role:v(["admin","manager","agent"],{errorMap:()=>({message:"Rôle invalide"})}),active:M().default(!0),permissions:le(k({page:d(),canView:M(),canEdit:M()})).default([]),smtpHost:d().optional().or(N("")),smtpPort:L().int().positive().optional().or(N(0)).or(N(587)),smtpUser:d().optional().or(N("")),smtpPassword:d().optional().or(N("")),smtpFromEmail:d().email("Adresse email d'expédition invalide").optional().or(N("")),commissionRate:ee([L(),d()]).transform(t=>typeof t=="number"?String(t):t).optional()});const Cl=E("service_requests",{id:C("id").primaryKey(),referenceNumber:i("reference_number").notNull().unique(),leadId:m("lead_id"),clientType:i("client_type").notNull(),name:i("name").notNull(),email:i("email").notNull(),phone:i("phone").notNull(),company:i("company"),siret:i("siret"),serviceType:i("service_type").notNull(),requestType:i("request_type").notNull(),otherRequestTypeDesc:i("other_request_type_desc"),buildingType:i("building_type").notNull(),terrainViabilise:i("terrain_viabilise"),projectStatus:i("project_status").notNull(),permitNumber:i("permit_number"),permitDeliveryDate:i("permit_delivery_date"),address:i("address").notNull(),addressComplement:i("address_complement"),city:i("city").notNull(),postalCode:i("postal_code").notNull(),cadastralReference:i("cadastral_reference"),powerRequired:i("power_required").notNull(),phaseType:i("phase_type"),desiredCompletionDate:i("desired_completion_date"),billingAddress:i("billing_address"),billingCity:i("billing_city"),billingPostalCode:i("billing_postal_code"),hasArchitect:P("has_architect"),architectName:i("architect_name"),architectPhone:i("architect_phone"),architectEmail:i("architect_email"),comments:i("comments"),estimatedPrice:i("estimated_price"),status:i("status").default("new").notNull(),category:i("category"),priceEstimate:i("price_estimate"),aiAnalysis:i("ai_analysis"),customerResponse:i("customer_response"),paymentStatus:i("payment_status"),paymentId:i("payment_id"),paymentAmount:Z("payment_amount",{precision:10,scale:2}),paymentMethod:i("payment_method"),paymentDate:g("payment_date"),cardBrand:i("card_brand"),cardLast4:i("card_last4"),cardExpMonth:m("card_exp_month"),cardExpYear:m("card_exp_year"),billingName:i("billing_name"),bankName:i("bank_name"),paymentError:i("payment_error"),ipAddress:i("ip_address"),userAgent:i("user_agent"),assignedTo:m("assigned_to"),assignedAt:g("assigned_at"),validatedBy:m("validated_by"),validatedAt:g("validated_at"),scheduledDate:g("scheduled_date"),scheduledTime:i("scheduled_time"),enedisReferenceNumber:i("enedis_reference_number"),notes:i("notes"),completedAt:g("completed_at"),cancellationReason:i("cancellation_reason"),hasReminderSent:P("has_reminder_sent").default(!1),createdAt:g("created_at").defaultNow().notNull(),updatedAt:g("updated_at").defaultNow().notNull(),lastUpdatedBy:m("last_updated_by")}),vl=q(Cl).omit({id:!0,referenceNumber:!0,leadId:!0,createdAt:!0,updatedAt:!0,status:!0,estimatedPrice:!0,category:!0,priceEstimate:!0,aiAnalysis:!0,customerResponse:!0,assignedTo:!0,assignedAt:!0,validatedBy:!0,validatedAt:!0,scheduledDate:!0,scheduledTime:!0,enedisReferenceNumber:!0,notes:!0,completedAt:!0,cancellationReason:!0,lastUpdatedBy:!0,paymentStatus:!0,paymentId:!0,paymentAmount:!0,paymentMethod:!0,paymentDate:!0,cardBrand:!0,cardLast4:!0,cardExpMonth:!0,cardExpYear:!0,billingName:!0,bankName:!0,paymentError:!0});vl.extend({clientType:v(["particulier","professionnel","collectivite"],{errorMap:()=>({message:"Veuillez sélectionner un type de client"})}),name:d().min(1,"Le nom est requis"),email:d().email("Adresse email invalide"),phone:d().regex(/^\+?[0-9\s\-\(\)]{10,20}$/,"Numéro de téléphone invalide"),company:d().optional().or(N("")),siret:d().optional().or(N("")).transform(t=>t||""),serviceType:v(["electricity","solar","particulier","professionnel"]),requestType:v(["new_connection","power_upgrade","temporary_connection","relocation","technical_visit","other"],{errorMap:()=>({message:"Veuillez sélectionner un type de demande"})}),otherRequestTypeDesc:d().optional().or(N("")),buildingType:v(["individual_house","apartment_building","commercial","industrial","agricultural","public","terrain"],{errorMap:()=>({message:"Veuillez sélectionner un type de bâtiment"})}),terrainViabilise:v(["viabilise","non_viabilise"]).optional().or(N("")),projectStatus:v(["planning","permit_pending","permit_approved","construction_started","construction_completed"],{errorMap:()=>({message:"Veuillez sélectionner l'état du projet"})}),permitNumber:d().optional().or(N("")),permitDeliveryDate:d().optional().or(N("")),address:d().min(1,"L'adresse est requise"),addressComplement:d().optional().or(N("")),city:d().min(1,"La ville est requise"),postalCode:d().regex(/^[0-9]{5}$/,"Code postal invalide (5 chiffres)"),cadastralReference:d().optional().or(N("")),powerRequired:d().min(1,"La puissance demandée est requise").transform(t=>t==="36-jaune"?"36":t),phaseType:v(["monophase","triphase","inconnu"],{errorMap:()=>({message:"Veuillez sélectionner un type de phase"})}).optional().or(N("")),desiredCompletionDate:d().optional().or(N("")),useDifferentBillingAddress:M().optional().default(!1),billingAddress:d().optional().or(N("")),billingCity:d().optional().or(N("")),billingPostalCode:d().optional().or(N("")).or(d().regex(/^[0-9]{5}$/,"Code postal invalide (5 chiffres)").optional()),hasArchitect:M().optional(),architectName:d().optional().or(N("")),architectPhone:d().optional().or(N("")),architectEmail:d().email("Adresse email invalide").optional().or(N("")),comments:d().optional().or(N(""))});const El=E("leads",{id:C("id").primaryKey(),sessionToken:Vi("session_token").notNull().unique().defaultRandom(),referenceNumber:i("reference_number"),firstName:i("first_name"),lastName:i("last_name"),email:i("email"),phone:i("phone"),clientType:i("client_type"),company:i("company"),siret:i("siret"),serviceType:i("service_type").default("electricity"),requestType:i("request_type"),otherRequestTypeDesc:i("other_request_type_desc"),buildingType:i("building_type"),terrainViabilise:i("terrain_viabilise"),projectStatus:i("project_status"),permitNumber:i("permit_number"),permitDeliveryDate:i("permit_delivery_date"),address:i("address"),addressComplement:i("address_complement"),city:i("city"),postalCode:i("postal_code"),cadastralReference:i("cadastral_reference"),powerRequired:i("power_required"),phaseType:i("phase_type"),desiredCompletionDate:i("desired_completion_date"),billingAddress:i("billing_address"),billingCity:i("billing_city"),billingPostalCode:i("billing_postal_code"),hasArchitect:P("has_architect"),architectName:i("architect_name"),architectPhone:i("architect_phone"),architectEmail:i("architect_email"),comments:i("comments"),vatRate:i("vat_rate"),termsAccepted:P("terms_accepted").default(!1),immediatePurchaseAccepted:P("immediate_purchase_accepted").default(!1),connectionDelay:i("connection_delay"),completedSteps:m("completed_steps").default(0),isCompleted:P("is_completed").default(!1),convertedToRequest:P("converted_to_request").default(!1),convertedRequestId:m("converted_request_id"),assignedTo:m("assigned_to"),ipAddress:i("ip_address"),userAgent:i("user_agent"),createdAt:g("created_at").defaultNow().notNull(),updatedAt:g("updated_at").defaultNow().notNull(),lastTouchedAt:g("last_touched_at").defaultNow().notNull(),status:i("status").default("new"),statusUpdatedAt:g("status_updated_at"),statusUpdatedBy:m("status_updated_by"),callbackDate:g("callback_date"),callbackNotes:i("callback_notes"),hasContract:P("has_contract").default(!1),paymentStatus:i("payment_status"),paymentId:i("payment_id"),paymentAmount:Z("payment_amount",{precision:10,scale:2}),paymentMethod:i("payment_method"),paymentDate:g("payment_date"),cardBrand:i("card_brand"),cardLast4:i("card_last4"),cardExpMonth:m("card_exp_month"),cardExpYear:m("card_exp_year"),billingName:i("billing_name"),bankName:i("bank_name"),paymentError:i("payment_error")});q(El).omit({id:!0,sessionToken:!0,completedSteps:!0,isCompleted:!0,convertedToRequest:!0,convertedRequestId:!0,assignedTo:!0,createdAt:!0,updatedAt:!0,lastTouchedAt:!0,status:!0,statusUpdatedAt:!0,statusUpdatedBy:!0,callbackDate:!0,callbackNotes:!0,paymentStatus:!0,paymentId:!0,paymentAmount:!0,paymentMethod:!0,paymentDate:!0,cardBrand:!0,cardLast4:!0,cardExpMonth:!0,cardExpYear:!0,billingName:!0,bankName:!0,paymentError:!0});const jl={NEW:"new",INTERESTED:"interested",NOT_INTERESTED:"not_interested",NO_RESPONSE:"no_response",CALLBACK_SCHEDULED:"callback_scheduled",PROCESS_COMPLETE:"process_complete"},Rl={NEW:"new",PENDING:"pending",ASSIGNED:"assigned",VALIDATED:"validated",IN_PROGRESS:"in_progress",SCHEDULED:"scheduled",COMPLETED:"completed",CANCELLED:"cancelled"},Ol={CREATE:"create",UPDATE:"update",ASSIGN:"assign",VALIDATE:"validate",SCHEDULE:"schedule",COMPLETE:"complete",CANCEL:"cancel"},Bl=E("system_configs",{id:C("id").primaryKey(),configKey:i("config_key").notNull().unique(),configValue:i("config_value"),configGroup:i("config_group").notNull(),isSecret:P("is_secret").default(!1).notNull(),description:i("description"),updatedAt:g("updated_at").defaultNow().notNull(),updatedBy:m("updated_by")});q(Bl).omit({id:!0,updatedAt:!0});const ql=E("email_templates",{id:C("id").primaryKey(),templateKey:i("template_key").notNull().unique(),name:i("name").notNull(),subject:i("subject").notNull(),htmlContent:i("html_content").notNull(),textContent:i("text_content").notNull(),description:i("description"),variables:i("variables"),active:P("active").default(!0).notNull(),createdAt:g("created_at").defaultNow().notNull(),updatedAt:g("updated_at").defaultNow().notNull(),updatedBy:m("updated_by")});q(ql).omit({id:!0,createdAt:!0,updatedAt:!0});const Ll=E("ui_animations",{id:C("id").primaryKey(),name:i("name").notNull(),type:i("type").notNull(),category:i("category").notNull(),component:i("component").notNull(),enabled:P("enabled").default(!0).notNull(),default:P("default").default(!1).notNull(),config:R("config").default({}).notNull(),pages:i("pages").array(),lastModifiedAt:g("last_modified_at").defaultNow().notNull(),lastModifiedBy:m("last_modified_by"),createdAt:g("created_at").defaultNow().notNull()}),Vl=q(Ll).omit({id:!0,lastModifiedAt:!0,createdAt:!0});Vl.extend({name:d().min(3,"Le nom doit contenir au moins 3 caractères"),type:v(["spinner","pulse","progress","dots","circuit","wave"],{errorMap:()=>({message:"Type d'animation non valide"})}),category:v(["form","payment","loading","analysis","processing"],{errorMap:()=>({message:"Catégorie non valide"})}),component:d().min(1,"Le composant est requis"),enabled:M(),default:M()});const Ml=E("payments",{id:C("id").primaryKey(),paymentId:i("payment_id").notNull(),referenceNumber:i("reference_number").notNull(),amount:Z("amount",{precision:10,scale:2}).notNull(),status:i("status").notNull().default("pending"),method:i("method").default("card"),customerName:i("customer_name"),customerEmail:i("customer_email"),cardBrand:i("card_brand"),cardLast4:i("card_last4"),cardExpMonth:m("card_exp_month"),cardExpYear:m("card_exp_year"),billingName:i("billing_name"),paymentMethod:i("payment_method"),metadata:R("metadata"),errorMessage:i("error_message"),createdAt:g("created_at").defaultNow().notNull(),updatedAt:g("updated_at").defaultNow().notNull(),createdBy:m("created_by")});q(Ml).omit({id:!0,createdAt:!0,updatedAt:!0});const zl=E("agent_performance_metrics",{id:C("id").primaryKey(),userId:m("user_id").notNull(),periodStart:g("period_start",{mode:"string"}).notNull(),periodEnd:g("period_end",{mode:"string"}).notNull(),leadsReceived:m("leads_received").default(0),leadsConverted:m("leads_converted").default(0),leadsConversionRate:K("leads_conversion_rate").default(0),paymentsProcessed:m("payments_processed").default(0),paymentsAmount:m("payments_amount").default(0),commissionsEarned:m("commissions_earned").default(0),taskCompletionRate:K("task_completion_rate").default(0),averageResponseTime:K("average_response_time").default(0),appointmentsScheduled:m("appointments_scheduled").default(0),clientsAcquired:m("clients_acquired").default(0),qualityScore:m("quality_score").default(0),efficiency:m("efficiency").default(0),dailyActivity:i("daily_activity"),createdAt:g("created_at",{mode:"string"}).notNull(),updatedAt:g("updated_at",{mode:"string"})});q(zl,{dailyActivity:d().optional()}).omit({id:!0});const Fl=E("activity_logs",{id:C("id").primaryKey(),userId:m("user_id").notNull(),action:i("action").notNull(),entityType:i("entity_type").notNull(),entityId:m("entity_id").notNull(),details:i("details"),createdAt:g("created_at").defaultNow().notNull(),ipAddress:i("ip_address")});q(Fl).omit({id:!0,createdAt:!0});export{Ol as A,jl as L,Rl as R};
