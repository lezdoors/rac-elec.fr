import{c as Z,r as d,j as e,aW as pe,v as $,aY as je,a$ as Ee,X as q,aZ as fe,a_ as Ne,b0 as Se,b1 as Te,ax as De,a as X,L as D,B as m,R as ce,l as R,e as Ae,T as Le,W as ke,Y as Ie,Z as Pe,M as F,a2 as Re,G as P,I as W,a3 as de,S as me,a4 as Fe,P as ne,U as B,w as J,N as oe,x as Ve,C as _,p as _e,aK as qe}from"./index-BytzqsI1.js";import{u as H}from"./useQuery-CB6jeSoE.js";import{w as Me,A as ze,U as Ge}from"./admin-layout-DkPJFpZt.js";import{C as A,a as M,b as z,c as G,d as L,e as Oe}from"./card-cu8nkFfF.js";import{B as Q}from"./badge-DeTmWeeh.js";import{R as n,A as u}from"./schema-DVWMxU23.js";import{A as ee,a as se,b as ae,c as te}from"./accordion-Zs00hUrA.js";import{T as ge,a as be,b as O,c as U}from"./tabs-3uZezxVC.js";import{S as Ue}from"./separator-Eb2TMiVl.js";import{F as T}from"./file-text-B9-aPHNC.js";import{T as ye}from"./triangle-alert-DlMT5u1J.js";import{D as He}from"./download-Desle92x.js";import{S as $e,a as Be,d as Ke,b as We,c as Qe}from"./select-NhdEs8Aj.js";import{R as Ye}from"./refresh-cw-5x6N714S.js";import{S as Ze}from"./settings-tKFgvQrj.js";import{U as Xe}from"./users-DKjFed64.js";import{B as Je}from"./building-P8SdoPHy.js";import{H as xe}from"./history-CI3GhiEe.js";import{M as es}from"./map-pin-CEEUSyjO.js";import{H as ss}from"./hourglass-BOAVDxWE.js";import{I as ue}from"./inbox-DqIztTky.js";import{I as as}from"./info-D_9-Gws2.js";import{S as ts}from"./search-CYHR7-B1.js";import"./use-auth-CI_EWFkx.js";import"./use-mobile-DERGq--V.js";import"./index-DOWbSDw0.js";import"./log-out-BLnOlPlW.js";import"./credit-card-CJxfBYMi.js";import"./index-iXKPUio3.js";import"./index-BgrenHQt.js";import"./external-link-cKQKiMyg.js";import"./index-CtD-1e3y.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=Z("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Z("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=Z("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=Z("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),re=Se,is=Te,ve=d.forwardRef(({className:i,...r},l)=>e.jsx(pe,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...r,ref:l}));ve.displayName=pe.displayName;const ls=De("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Y=d.forwardRef(({side:i="right",className:r,children:l,...N},o)=>e.jsxs(is,{children:[e.jsx(ve,{}),e.jsxs(je,{ref:o,className:$(ls({side:i}),r),...N,children:[l,e.jsxs(Ee,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Y.displayName=je.displayName;const ie=({className:i,...r})=>e.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",i),...r});ie.displayName="SheetHeader";const le=d.forwardRef(({className:i,...r},l)=>e.jsx(fe,{ref:l,className:$("text-lg font-semibold text-foreground",i),...r}));le.displayName=fe.displayName;const we=d.forwardRef(({className:i,...r},l)=>e.jsx(Ne,{ref:l,className:$("text-sm text-muted-foreground",i),...r}));we.displayName=Ne.displayName;function cs({clientId:i,referenceNumber:r,showTitle:l=!1}){const{toast:N}=X(),[o,x]=d.useState(!1),{data:g,isLoading:y,error:h,isError:v}=H({queryKey:[`/api/certificates/${r}`],queryFn:async()=>{const c=await R("GET",`/api/certificates/${r}`);if(!c.ok){if(c.status===404)return null;throw new Error("Erreur lors de la récupération du certificat")}return(await c.json()).url}}),b=async()=>{x(!0);try{const c=await R("POST",`/api/certificates/${r}/generate`,{});if(!c.ok){const j=await c.json();throw new Error(j.message||"Erreur lors de la génération du certificat")}const p=await c.json();await new Promise(j=>setTimeout(j,1e3)),window.open(p.url,"_blank"),N({title:"Certificat généré",description:"Le certificat a été généré avec succès"})}catch(c){N({title:"Erreur",description:c.message,variant:"destructive"})}finally{x(!1)}},C=()=>{g&&(x(!0),window.open(g,"_blank"),setTimeout(()=>{x(!1)},1e3))};return y?e.jsxs(A,{children:[l&&e.jsxs(M,{className:"pb-2",children:[e.jsxs(z,{className:"text-lg flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-blue-600"}),"Certificat de demande"]}),e.jsx(G,{children:"Certificat attestant la demande et le paiement"})]}),e.jsxs(L,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(D,{className:"h-8 w-8 animate-spin text-blue-600 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Vérification du certificat..."})]})]}):v?e.jsxs(A,{children:[l&&e.jsxs(M,{className:"pb-2",children:[e.jsxs(z,{className:"text-lg flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-blue-600"}),"Certificat de demande"]}),e.jsx(G,{children:"Certificat attestant la demande et le paiement"})]}),e.jsxs(L,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(ye,{className:"h-10 w-10 text-amber-500 mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"Une erreur est survenue lors de la récupération du certificat"}),e.jsx("p",{className:"text-sm text-red-500",children:h instanceof Error?h.message:"Erreur inconnue"})]})]}):g?e.jsxs(A,{children:[l&&e.jsxs(M,{className:"pb-2",children:[e.jsxs(z,{className:"text-lg flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-blue-600"}),"Certificat de demande"]}),e.jsx(G,{children:"Certificat attestant la demande et le paiement"})]}),e.jsx(L,{className:"pt-6",children:e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"w-full max-w-md mx-auto border rounded-md overflow-hidden mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-3 flex items-center border-b",children:[e.jsx(ce,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsxs("span",{className:"font-medium",children:["Certificat de demande #",r]})]}),e.jsxs("div",{className:"p-4 flex flex-col items-center",children:[e.jsx(T,{className:"h-24 w-24 text-blue-600 mb-2"}),e.jsx("p",{className:"text-center mb-4",children:"Ce certificat atteste officiellement de la demande de raccordement électrique et du paiement associé. Il peut être utilisé comme preuve en cas de litige."}),e.jsxs("div",{className:"w-full mt-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between border-t border-dashed pt-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Format:"}),e.jsx("span",{className:"font-medium",children:"PDF"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Sécurité:"}),e.jsx("span",{className:"font-medium",children:"Horodaté et sécurisé"})]})]})]})]})})}),e.jsx(Oe,{children:e.jsx(m,{className:"w-full",onClick:C,disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Téléchargement..."]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Télécharger le certificat"]})})})]}):e.jsxs(A,{children:[l&&e.jsxs(M,{className:"pb-2",children:[e.jsxs(z,{className:"text-lg flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-blue-600"}),"Certificat de demande"]}),e.jsx(G,{children:"Certificat attestant la demande et le paiement"})]}),e.jsx(L,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-6 border border-dashed rounded-lg",children:[e.jsx(ns,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Certificat non disponible"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Aucun certificat n'a encore été généré pour cette demande. Les certificats sont générés après validation du paiement."}),e.jsx(m,{onClick:b,disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Génération..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Générer le certificat"]})})]})})]})}function Ce({isOpen:i,onClose:r,clientEmail:l,clientName:N,referenceNumber:o}){const{toast:x}=X(),[g,y]=d.useState("template"),[h,v]=d.useState(""),[b,C]=d.useState(""),[c,p]=d.useState(""),[j,f]=d.useState(!1),{data:w,isLoading:k}=H({queryKey:["/api/email-templates"],queryFn:async()=>{const s=await R("GET","/api/email-templates");if(!s.ok)throw new Error("Erreur lors de la récupération des modèles d'email");return s.json()},enabled:i}),E=Ae({mutationFn:async()=>{const s=await R("POST","/api/send-email",{to:l,subject:b,content:c,referenceNumber:o});if(!s.ok){const a=await s.json();throw new Error(a.message||"Erreur lors de l'envoi de l'email")}return s.json()},onSuccess:()=>{x({title:"Email envoyé",description:"L'email a été envoyé avec succès au client"}),r()},onError:s=>{x({title:"Erreur",description:s.message,variant:"destructive"})}}),t=w?Object.entries(w.reduce((s,a)=>(s[a.category]||(s[a.category]=[]),s[a.category].push(a),s),{})):[],V=s=>{if(v(s),f(!1),!w)return;const a=w.find(S=>S.id.toString()===s);if(a){let S=a.content.replace(/{name}/g,N).replace(/{reference}/g,o);C(a.subject),p(S)}},I=()=>{if(!b.trim()||!c.trim()){x({title:"Champs requis",description:"Veuillez remplir le sujet et le contenu de l'email",variant:"destructive"});return}E.mutate()};return d.useEffect(()=>{i&&(y("template"),v(""),C(""),p(""),f(!1))},[i]),e.jsx(Le,{open:i,onOpenChange:s=>!s&&r(),children:e.jsxs(ke,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ie,{children:[e.jsxs(Pe,{className:"flex items-center",children:[e.jsx(F,{className:"mr-2 h-5 w-5 text-blue-600"}),"Envoyer un email au client"]}),e.jsx(Re,{children:"Envoyez un email au client à partir d'un modèle ou créez un message personnalisé."})]}),e.jsxs(ge,{value:g,onValueChange:y,className:"mt-4",children:[e.jsxs(be,{className:"grid grid-cols-2 mb-6",children:[e.jsxs(O,{value:"template",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Modèles"]}),e.jsxs(O,{value:"custom",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Email personnalisé"]})]}),e.jsx(U,{value:"template",className:"space-y-4 m-0",children:k?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(D,{className:"h-8 w-8 animate-spin text-blue-600 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement des modèles..."})]}):!w||w.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(ye,{className:"h-12 w-12 text-amber-500 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Aucun modèle d'email disponible."})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"template-select",children:"Sélectionner un modèle"}),e.jsxs($e,{value:h,onValueChange:V,children:[e.jsx(Be,{id:"template-select",children:e.jsx(Ke,{placeholder:"Choisir un modèle"})}),e.jsx(We,{children:t.map(([s,a])=>e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground px-2 py-1.5",children:s}),a.map(S=>e.jsx(Qe,{value:S.id.toString(),children:S.name},S.id))]},s))})]})]}),h&&e.jsxs("div",{className:"border rounded-md p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(P,{htmlFor:"template-subject",children:"Objet"}),j?e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>V(h),children:[e.jsx(Ye,{className:"h-3.5 w-3.5 mr-1.5"}),"Réinitialiser"]}):e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>f(!0),children:[e.jsx(Ze,{className:"h-3.5 w-3.5 mr-1.5"}),"Personnaliser"]})]}),e.jsx(W,{id:"template-subject",value:b,onChange:s=>C(s.target.value),disabled:!j})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"template-content",children:"Contenu"}),e.jsx(de,{id:"template-content",value:c,onChange:s=>p(s.target.value),rows:12,disabled:!j,className:"font-sans"})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Sera envoyé à: ",e.jsx("span",{className:"font-medium",children:l})]}),e.jsx(m,{onClick:I,disabled:E.isPending||!b.trim()||!c.trim(),children:E.isPending?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Envoyer l'email"]})})]})})]})]})})}),e.jsx(U,{value:"custom",className:"space-y-4 m-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"custom-to",children:"Destinataire"}),e.jsx(W,{id:"custom-to",value:l,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"custom-subject",children:"Objet"}),e.jsx(W,{id:"custom-subject",value:b,onChange:s=>C(s.target.value),placeholder:"Objet de l'email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"custom-content",children:"Contenu"}),e.jsx(de,{id:"custom-content",value:c,onChange:s=>p(s.target.value),placeholder:"Saisissez votre message ici...",rows:12,className:"font-sans"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground italic mb-4",children:["Astuce: Vous pouvez utiliser ",e.jsx("span",{className:"font-mono",children:"{name}"})," pour le nom du client et ",e.jsx("span",{className:"font-mono",children:"{reference}"})," pour la référence de la demande."]})]})})]}),e.jsxs(Fe,{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx(Xe,{className:"h-3.5 w-3.5 inline-block mr-1"}),"Client: ",e.jsx("span",{className:"font-medium",children:N})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(m,{variant:"outline",onClick:r,children:"Annuler"}),e.jsx(m,{onClick:I,disabled:E.isPending||!b.trim()||!c.trim(),children:E.isPending?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Envoyer"]})})]})]})]})})}function ds({clientId:i,onClose:r}){X();const[l,N]=d.useState("info"),[o,x]=d.useState(!1),{data:g,isLoading:y,error:h}=H({queryKey:[`/api/service-request-id/${i}`],queryFn:async()=>{const a=await R("GET",`/api/service-request-id/${i}`);if(!a.ok)throw new Error("Erreur lors de la récupération des détails du client");return a.json()}}),{data:v,isLoading:b}=H({queryKey:[`/api/activity-logs/service_request/${i}`],queryFn:async()=>{const a=await R("GET",`/api/activity-logs/service_request/${i}`);if(!a.ok)throw new Error("Erreur lors de la récupération des logs d'activité");return a.json()},enabled:!!g}),C=a=>{switch(a){case n.NEW:return e.jsx(ue,{className:"h-4 w-4 text-blue-500"});case n.PENDING:return e.jsx(ss,{className:"h-4 w-4 text-amber-500"});case n.ASSIGNED:return e.jsx(B,{className:"h-4 w-4 text-purple-500"});case n.VALIDATED:return e.jsx(_,{className:"h-4 w-4 text-green-500"});case n.IN_PROGRESS:return e.jsx(_e,{className:"h-4 w-4 text-indigo-500"});case n.SCHEDULED:return e.jsx(J,{className:"h-4 w-4 text-cyan-500"});case n.COMPLETED:return e.jsx(_,{className:"h-4 w-4 text-emerald-500"});case n.CANCELLED:return e.jsx(q,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ve,{className:"h-4 w-4 text-gray-500"})}},c=a=>{switch(a){case n.NEW:return"Nouvelle demande";case n.PENDING:return"En attente";case n.ASSIGNED:return"Assignée";case n.VALIDATED:return"Validée";case n.IN_PROGRESS:return"En cours";case n.SCHEDULED:return"Rendez-vous planifié";case n.COMPLETED:return"Terminée";case n.CANCELLED:return"Annulée";default:return"Statut inconnu"}},p=a=>{switch(a){case n.NEW:return"blue";case n.PENDING:return"amber";case n.ASSIGNED:return"purple";case n.VALIDATED:return"green";case n.IN_PROGRESS:return"indigo";case n.SCHEDULED:return"cyan";case n.COMPLETED:return"emerald";case n.CANCELLED:return"red";default:return"gray"}},j=a=>{if(!a)return"N/A";const S=typeof a=="string"?new Date(a):a;return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(S)},f=a=>{if(!a)return"N/A";switch(a){case"monophase":return"Monophasé";case"triphase":return"Triphasé";default:return a}},w=a=>{switch(a){case"particulier":return"Particulier";case"professionnel":return"Professionnel";case"collectivite":return"Collectivité";default:return a}},k=a=>{switch(a){case"new_connection":return"Nouveau raccordement";case"power_upgrade":return"Augmentation de puissance";case"temporary_connection":return"Raccordement temporaire";case"relocation":return"Déplacement d'ouvrage";case"technical_visit":return"Visite technique";case"other":return"Autre";default:return a}},E=a=>{switch(a){case"individual_house":return"Maison individuelle";case"apartment_building":return"Immeuble collectif";case"commercial":return"Local commercial";case"industrial":return"Site industriel";case"agricultural":return"Exploitation agricole";case"public":return"Bâtiment public";case"terrain":return"Terrain";default:return a}},t=a=>{switch(a){case"planning":return"En phase de planification";case"permit_pending":return"Permis en cours d'instruction";case"permit_approved":return"Permis approuvé";case"construction_started":return"Construction démarrée";case"construction_completed":return"Construction terminée";default:return a}},V=a=>{switch(a){case u.CREATE:return"Création";case u.UPDATE:return"Mise à jour";case u.ASSIGN:return"Assignation";case u.VALIDATE:return"Validation";case u.SCHEDULE:return"Planification";case u.COMPLETE:return"Finalisation";case u.CANCEL:return"Annulation";case"payment_succeeded":return"Paiement réussi";case"payment_failed":return"Paiement échoué";case"certificate_generated":return"Certificat généré";case"email_sent":return"Email envoyé";default:return a}},I=a=>{switch(a){case u.CREATE:return e.jsx(ue,{className:"h-4 w-4"});case u.UPDATE:return e.jsx(T,{className:"h-4 w-4"});case u.ASSIGN:return e.jsx(B,{className:"h-4 w-4"});case u.VALIDATE:return e.jsx(_,{className:"h-4 w-4"});case u.SCHEDULE:return e.jsx(J,{className:"h-4 w-4"});case u.COMPLETE:return e.jsx(_,{className:"h-4 w-4"});case u.CANCEL:return e.jsx(q,{className:"h-4 w-4"});case"payment_succeeded":return e.jsx(_,{className:"h-4 w-4 text-green-500"});case"payment_failed":return e.jsx(q,{className:"h-4 w-4 text-red-500"});case"certificate_generated":return e.jsx(oe,{className:"h-4 w-4 text-blue-500"});case"email_sent":return e.jsx(F,{className:"h-4 w-4 text-blue-500"});default:return e.jsx(as,{className:"h-4 w-4"})}};if(y)return e.jsx(re,{open:!0,onOpenChange:r,children:e.jsx(Y,{className:"w-full sm:w-[600px] sm:max-w-full overflow-y-auto",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx(D,{className:"h-10 w-10 animate-spin text-primary mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Chargement des détails du client..."})]})})});if(h||!g)return e.jsx(re,{open:!0,onOpenChange:r,children:e.jsxs(Y,{className:"w-full sm:w-[600px] sm:max-w-full overflow-y-auto",children:[e.jsx(ie,{className:"mb-6",children:e.jsx(le,{children:"Détails du client"})}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"rounded-full bg-red-100 p-3 mb-4",children:e.jsx(q,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Erreur"}),e.jsx("p",{className:"text-muted-foreground text-center",children:h instanceof Error?h.message:"Une erreur est survenue lors de la récupération des détails du client."}),e.jsx(m,{onClick:r,className:"mt-6",children:"Fermer"})]})]})});const s=g;return e.jsxs(e.Fragment,{children:[e.jsx(re,{open:!0,onOpenChange:r,children:e.jsxs(Y,{className:"w-full sm:w-[600px] sm:max-w-full overflow-y-auto",children:[e.jsxs(ie,{className:"mb-1",children:[e.jsxs(le,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"mr-2 h-5 w-5 text-primary"}),"Détails du client"]}),e.jsx(Q,{className:`bg-${p(s.status)}-100 text-${p(s.status)}-800 hover:bg-${p(s.status)}-100`,children:e.jsxs("span",{className:"flex items-center",children:[C(s.status),e.jsx("span",{className:"ml-1",children:c(s.status)})]})})]}),e.jsx(we,{children:e.jsxs("div",{className:"flex justify-between flex-wrap items-start",children:[e.jsxs("span",{children:["Référence: ",e.jsx("span",{className:"font-semibold",children:s.referenceNumber})]}),e.jsxs("span",{children:["Créée le: ",j(s.createdAt)]})]})})]}),e.jsx(Ue,{className:"my-4"}),e.jsxs("div",{className:"flex justify-end space-x-2 mb-4",children:[e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>{const a=s.phone.replace(/\s/g,"");window.open(`tel:${a}`,"_blank")},children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Appeler"]}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>x(!0),children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Envoyer un email"]})]}),e.jsxs(ge,{value:l,onValueChange:N,children:[e.jsxs(be,{className:"grid grid-cols-3 mb-4",children:[e.jsxs(O,{value:"info",children:[e.jsx(he,{className:"h-4 w-4 mr-1"}),"Infos client"]}),e.jsxs(O,{value:"tech",children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),"Infos techniques"]}),e.jsxs(O,{value:"history",children:[e.jsx(xe,{className:"h-4 w-4 mr-1"}),"Historique"]})]}),e.jsxs(Me,{className:"h-[calc(90vh-200px)]",children:[e.jsx(U,{value:"info",className:"mt-0",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(B,{className:"h-5 w-5 mr-2 text-blue-600"}),"Informations client"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Nom"}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Email"}),e.jsx("span",{className:"font-medium",children:s.email})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Téléphone"}),e.jsx("span",{className:"font-medium",children:s.phone})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type"}),e.jsx("span",{className:"font-medium",children:w(s.clientType)})]}),s.company&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Entreprise"}),e.jsx("span",{className:"font-medium",children:s.company})]}),s.siret&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"SIRET"}),e.jsx("span",{className:"font-medium",children:s.siret})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(es,{className:"h-5 w-5 mr-2 text-red-500"}),"Adresse du site"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Adresse"}),e.jsx("span",{className:"font-medium",children:s.address})]}),s.addressComplement&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Complément"}),e.jsx("span",{className:"font-medium",children:s.addressComplement})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ville"}),e.jsx("span",{className:"font-medium",children:s.city})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Code postal"}),e.jsx("span",{className:"font-medium",children:s.postalCode})]}),s.cadastralReference&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Référence cadastrale"}),e.jsx("span",{className:"font-medium",children:s.cadastralReference})]})]})]}),s.billingAddress&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(K,{className:"h-5 w-5 mr-2 text-green-500"}),"Adresse de facturation"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Adresse"}),e.jsx("span",{className:"font-medium",children:s.billingAddress})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ville"}),e.jsx("span",{className:"font-medium",children:s.billingCity})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Code postal"}),e.jsx("span",{className:"font-medium",children:s.billingPostalCode})]})]})]}),e.jsx(cs,{clientId:s.id,referenceNumber:s.referenceNumber,showTitle:!0})]})}),e.jsx(U,{value:"tech",className:"mt-0",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(rs,{className:"h-5 w-5 mr-2 text-amber-500"}),"Informations de la demande"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type de demande"}),e.jsx("span",{className:"font-medium",children:k(s.requestType)})]}),s.requestType==="other"&&s.otherRequestTypeDesc&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Précision"}),e.jsx("span",{className:"font-medium",children:s.otherRequestTypeDesc})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type de bâtiment"}),e.jsx("span",{className:"font-medium",children:E(s.buildingType)})]}),s.buildingType==="terrain"&&s.terrainViabilise&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"État du terrain"}),e.jsx("span",{className:"font-medium",children:s.terrainViabilise==="viabilise"?"Viabilisé":"Non viabilisé"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(K,{className:"h-5 w-5 mr-2 text-purple-500"}),"État du projet"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Statut"}),e.jsx("span",{className:"font-medium",children:t(s.projectStatus)})]}),s.permitNumber&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Numéro de permis"}),e.jsx("span",{className:"font-medium",children:s.permitNumber})]}),s.permitDeliveryDate&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date de délivrance"}),e.jsx("span",{className:"font-medium",children:s.permitDeliveryDate})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(K,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Puissance"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Puissance demandée"}),e.jsxs("span",{className:"font-medium",children:[s.powerRequired," kVA"]})]}),s.phaseType&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type de phase"}),e.jsx("span",{className:"font-medium",children:f(s.phaseType)})]})]})]}),s.desiredCompletionDate&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(J,{className:"h-5 w-5 mr-2 text-blue-500"}),"Planning"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date souhaitée"}),e.jsx("span",{className:"font-medium",children:s.desiredCompletionDate})]})})]}),s.hasArchitect&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(B,{className:"h-5 w-5 mr-2 text-indigo-500"}),"Architecte"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.architectName&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Nom"}),e.jsx("span",{className:"font-medium",children:s.architectName})]}),s.architectPhone&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Téléphone"}),e.jsx("span",{className:"font-medium",children:s.architectPhone})]}),s.architectEmail&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Email"}),e.jsx("span",{className:"font-medium",children:s.architectEmail})]})]})]}),s.comments&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[e.jsx(K,{className:"h-5 w-5 mr-2 text-gray-500"}),"Commentaires"]}),e.jsx("div",{className:"border rounded-md p-3",children:e.jsx("p",{className:"whitespace-pre-wrap",children:s.comments})})]})]})}),e.jsx(U,{value:"history",className:"mt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ee,{type:"single",collapsible:!0,defaultValue:"history",className:"mb-4",children:e.jsxs(se,{value:"history",children:[e.jsx(ae,{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"h-5 w-5 mr-2 text-blue-600"}),e.jsx("span",{children:"Historique des activités"})]})}),e.jsx(te,{children:b?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(D,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):!v||v.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Aucune activité enregistrée"}):e.jsx("div",{className:"space-y-3 py-2",children:v.map(a=>e.jsxs("div",{className:"relative border rounded-md p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"rounded-full p-1.5 bg-blue-100 mr-2",children:I(a.action)}),e.jsx("span",{className:"font-medium",children:V(a.action)})]}),e.jsx(Q,{variant:"outline",children:j(a.createdAt)})]}),e.jsx("div",{className:"text-sm pl-7 text-muted-foreground",children:a.details}),a.ipAddress&&e.jsx("div",{className:"text-xs mt-2 text-muted-foreground flex items-center pl-7",children:e.jsxs("span",{children:["IP: ",a.ipAddress]})})]},a.id))})})]})}),e.jsx(ee,{type:"single",collapsible:!0,className:"mb-4",children:e.jsxs(se,{value:"payment",children:[e.jsx(ae,{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(oe,{className:"h-5 w-5 mr-2 text-green-600"}),e.jsx("span",{children:"Informations de paiement"})]})}),e.jsx(te,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Statut"}),e.jsx(Q,{variant:s.paymentStatus==="succeeded"?"default":s.paymentStatus==="failed"?"destructive":"outline",children:s.paymentStatus||"Non payé"})]}),s.paymentId&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"ID Transaction"}),e.jsx("span",{className:"font-medium font-mono text-sm",children:s.paymentId})]}),s.paymentMethod&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Méthode"}),e.jsx("span",{className:"font-medium",children:s.paymentMethod})]}),s.paymentDate&&e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date"}),e.jsx("span",{className:"font-medium",children:j(s.paymentDate)})]}),e.jsxs("div",{className:"flex justify-between py-1 border-b",children:[e.jsx("span",{className:"text-muted-foreground",children:"Montant"}),e.jsx("span",{className:"font-medium",children:"129,80 € TTC"})]})]})})]})}),s.notes&&e.jsx(ee,{type:"single",collapsible:!0,className:"mb-4",children:e.jsxs(se,{value:"notes",children:[e.jsx(ae,{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-amber-600"}),e.jsx("span",{children:"Notes internes"})]})}),e.jsx(te,{children:e.jsx("div",{className:"p-3 border rounded-md whitespace-pre-wrap",children:s.notes})})]})})]})})]})]})]})}),o&&e.jsx(Ce,{clientEmail:s.email,clientName:s.name,referenceNumber:s.referenceNumber,isOpen:o,onClose:()=>x(!1)})]})}function Os(){var w,k,E;const{toast:i}=X(),[r,l]=d.useState(""),[N,o]=d.useState(null),[x,g]=d.useState(!1),[y,h]=d.useState(null),{data:v,isLoading:b,error:C}=H({queryKey:["/api/service-requests"],queryFn:qe({on401:"throw"})}),c=t=>{o(t)},p=t=>{h(t),g(!0)},j=t=>{window.location.href=`tel:${t}`,i({title:"Appel en cours",description:`Appel vers ${t}`})},f=v?v.map(t=>({id:t.id,name:t.name||"Client sans nom",email:t.email,phone:t.phone,companyName:t.company||null,status:t.status,referenceNumber:t.referenceNumber,createdAt:new Date(t.createdAt).toISOString()})).filter(t=>r===""||t.name.toLowerCase().includes(r.toLowerCase())||t.email.toLowerCase().includes(r.toLowerCase())||t.companyName&&t.companyName.toLowerCase().includes(r.toLowerCase())||t.referenceNumber.toLowerCase().includes(r.toLowerCase())):[];return e.jsxs(ze,{title:"Clients",description:"Gestion des clients et prospects",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Gestion des clients"})}),e.jsxs("p",{className:"text-muted-foreground",children:[f.length," client",f.length!==1?"s":""," au total"]})]}),e.jsxs("div",{className:"flex w-full sm:w-auto items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ts,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(W,{type:"search",placeholder:"Rechercher un client...",className:"pl-8 w-full sm:w-[300px]",value:r,onChange:t=>l(t.target.value)})]}),e.jsxs(m,{variant:"default",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Nouveau client"]})]})]}),b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(D,{className:"h-8 w-8 animate-spin text-blue-600"})}):C?e.jsx(A,{children:e.jsxs(L,{className:"py-10 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"Une erreur est survenue lors du chargement des clients."}),e.jsx(m,{variant:"outline",size:"sm",className:"mt-4",children:"Réessayer"})]})}):f.length===0?e.jsx(A,{children:e.jsxs(L,{className:"py-10 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Aucun client trouvé."}),r&&e.jsx(m,{variant:"outline",size:"sm",onClick:()=>l(""),children:"Effacer la recherche"})]})}):e.jsxs(A,{children:[e.jsxs(M,{className:"pb-1",children:[e.jsx(z,{children:"Liste des clients"}),e.jsx(G,{children:"Consultez et gérez tous vos clients"})]}),e.jsx(L,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-2 font-medium",children:"Client"}),e.jsx("th",{className:"text-left py-3 px-2 font-medium",children:"Contact"}),e.jsx("th",{className:"text-left py-3 px-2 font-medium",children:"Référence"}),e.jsx("th",{className:"text-left py-3 px-2 font-medium",children:"Statut"}),e.jsx("th",{className:"text-left py-3 px-2 font-medium",children:"Date"}),e.jsx("th",{className:"text-right py-3 px-2 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:f.map(t=>{const I=new Date(t.createdAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});let s="default",a="";switch(t.status){case"new":s="default",a="Nouveau";break;case"pending":s="outline",a="En attente";break;case"in_progress":s="secondary",a="En cours";break;case"validated":s="default",a="Validé";break;case"scheduled":s="default",a="Planifié";break;case"completed":s="default",a="Terminé";break;case"cancelled":s="destructive",a="Annulé";break;default:s="outline",a=t.status}return e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsxs("td",{className:"py-3 px-2",children:[e.jsx("div",{className:"font-medium",children:t.name}),t.companyName&&e.jsx("div",{className:"text-xs text-muted-foreground",children:t.companyName})]}),e.jsxs("td",{className:"py-3 px-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(F,{className:"h-3 w-3"}),e.jsx("span",{children:t.email})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[e.jsx(ne,{className:"h-3 w-3"}),e.jsx("span",{children:t.phone})]})]}),e.jsx("td",{className:"py-3 px-2",children:e.jsx("div",{className:"font-mono text-xs",children:t.referenceNumber})}),e.jsx("td",{className:"py-3 px-2",children:e.jsx(Q,{variant:s,children:a})}),e.jsx("td",{className:"py-3 px-2 text-muted-foreground text-xs",children:I}),e.jsx("td",{className:"py-3 px-2 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(m,{variant:"ghost",size:"icon",title:"Voir les détails",onClick:()=>c(t.id),children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"icon",title:"Envoyer un email",onClick:()=>p(t.id),children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"icon",title:"Appeler",onClick:()=>j(t.phone),children:e.jsx(ne,{className:"h-4 w-4"})})]})})]},t.id)})})]})})})]})]}),N&&e.jsx(ds,{clientId:N,onClose:()=>o(null)}),x&&y&&e.jsx(Ce,{clientEmail:((w=f.find(t=>t.id===y))==null?void 0:w.email)||"",clientName:((k=f.find(t=>t.id===y))==null?void 0:k.name)||"",referenceNumber:((E=f.find(t=>t.id===y))==null?void 0:E.referenceNumber)||"",isOpen:x,onClose:()=>{g(!1),h(null)}})]})}export{Os as default};
