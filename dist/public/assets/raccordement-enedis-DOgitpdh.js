import{r as c,j as e,X as se,l as ie,C as ce,v as de,f as v,g as y,h as N,i as w,n as me,k,I as z,d as ue,H as xe,p as _,F as he,B as ee,o as pe,P as ge,M as be,q as fe,S as je,w as ve,z as d,t as ye}from"./index-DqziY5qo.js";import{S as J,a as G,b as U,c as g,d as Y}from"./select-C58elGcx.js";import{C as Ne}from"./checkbox-Btm5cheI.js";import{t as we,a as ke}from"./analytics-3ePNMVbA.js";import{C as ae}from"./circle-alert-Cvt03EnY.js";import{C as Ce}from"./index-C7G0RlXC.js";import"./index-CTOltosb.js";import"./index-CthlaF60.js";import"./chevron-down-r8rKX2R_.js";import"./index-xFeiBsyo.js";const W="gclid",Se=90;function te(){if(typeof window>"u")return null;const o=new URLSearchParams(window.location.search).get("gclid");if(o){const a=new Date;return a.setDate(a.getDate()+Se),localStorage.setItem(W,o),localStorage.setItem(`${W}_expiry`,a.toISOString()),o}return null}function Le(){if(typeof window>"u")return null;const n=te();if(n)return n;const o=localStorage.getItem(W),a=localStorage.getItem(`${W}_expiry`);return!o||!a?null:new Date>new Date(a)?(localStorage.removeItem(W),localStorage.removeItem(`${W}_expiry`),null):o}typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",te):te());function Ve(){const n=c.useRef([]),o=c.useRef(new WeakSet);return c.useEffect(()=>{const a=()=>{document.querySelectorAll("form, [data-form-container]").forEach(f=>{f.querySelectorAll("input, textarea, select").forEach(S=>{const r=S;if(o.current.has(r))return;o.current.add(r),(!r.style.minHeight||parseInt(r.style.minHeight)<48)&&(r.style.minHeight="48px");const L=window.getComputedStyle(r);if(parseInt(L.fontSize)<16&&(r.style.fontSize="16px"),!r.getAttribute("autocomplete")){const j=r.name||r.id,t=r.getAttribute("type");if(j){const C={nom:"family-name",prenom:"given-name",email:"email",phone:"tel",telephone:"tel",adresse:"street-address",adresseProjet:"street-address",adresseFacturation:"billing street-address",codePostal:"postal-code",codePostalProjet:"postal-code",ville:"address-level2",villeProjet:"address-level2",raisonSociale:"organization",nomCollectivite:"organization",complementAdresse:"address-line2",complementAdresseProjet:"address-line2"};C[j]&&r.setAttribute("autocomplete",C[j])}t==="email"&&!r.getAttribute("autocomplete")&&r.setAttribute("autocomplete","email"),t==="tel"&&!r.getAttribute("autocomplete")&&r.setAttribute("autocomplete","tel")}if(!r.getAttribute("inputmode")){const j=r.getAttribute("type"),t=r.name||r.id;j==="email"||t&&t.includes("email")?r.setAttribute("inputmode","email"):j==="tel"||t&&(t.includes("phone")||t.includes("telephone"))?r.setAttribute("inputmode","tel"):t&&(t.includes("codePostal")||t.includes("postal"))&&(r.setAttribute("inputmode","numeric"),r.setAttribute("pattern","[0-9]*"))}!r.getAttribute("data-testid")&&r.name&&r.setAttribute("data-testid",`input-${r.name}`),r.style.touchAction||(r.style.touchAction="manipulation"),r.style.userSelect||(r.style.userSelect="text");const m=j=>{var $,F;const t=j.target,C=t.value.trim();t.closest("[data-invalid]")||(($=t.parentElement)==null?void 0:$.querySelector('[role="alert"]'))||((F=t.parentElement)==null?void 0:F.querySelector(".text-destructive"))||(t.type==="email"&&C&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C)?(t.classList.add("border-green-300"),t.classList.remove("border-amber-300")):(t.classList.add("border-amber-300"),t.classList.remove("border-green-300"))),t.type==="tel"&&C&&(/^(?:(?:\+|00)33|0)\s*[1-9](?:[\s.-]*\d{2}){4}$/.test(C)?(t.classList.add("border-green-300"),t.classList.remove("border-amber-300")):(t.classList.add("border-amber-300"),t.classList.remove("border-green-300"))),(t.name==="codePostal"||t.name==="codePostalProjet")&&C&&(/^\d{5}$/.test(C)?(t.classList.add("border-green-300"),t.classList.remove("border-amber-300")):(t.classList.add("border-amber-300"),t.classList.remove("border-green-300"))))},A=j=>{j.target.classList.remove("border-amber-300","border-green-300")};r.addEventListener("blur",m),r.addEventListener("focus",A),n.current.push(()=>{r.removeEventListener("blur",m),r.removeEventListener("focus",A)})}),f.querySelectorAll('button, [role="button"]').forEach(S=>{var L;const r=S;if(!o.current.has(r)&&(o.current.add(r),r.style.minHeight||(r.style.minHeight="48px"),r.style.minWidth||(r.style.minWidth="48px"),r.classList.contains("touch-manipulation")||r.classList.add("touch-manipulation"),!r.getAttribute("data-testid")&&((L=r.textContent)!=null&&L.trim()))){const m=r.textContent.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");r.setAttribute("data-testid",`button-${m}`)}}),f.querySelectorAll('select, [role="combobox"]').forEach(S=>{const r=S;o.current.has(r)||(o.current.add(r),r.style.minHeight||(r.style.minHeight="48px"),r.style.fontSize="16px",r.classList.contains("touch-manipulation")||r.classList.add("touch-manipulation"),!r.getAttribute("data-testid")&&r.name&&r.setAttribute("data-testid",`select-${r.name}`))}),f.querySelectorAll('a[href*="paiement"], a[href*="confirmation"], a[href*="contact"], a[href*="aide"]').forEach(S=>{var L;const r=S;if(!o.current.has(r)&&(o.current.add(r),!r.getAttribute("data-testid")&&((L=r.textContent)!=null&&L.trim()))){const m=r.textContent.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");r.setAttribute("data-testid",`link-${m}`)}})})},h=(()=>{setTimeout(a,100);const M=new MutationObserver(f=>{let V=!1;f.forEach(P=>{P.addedNodes.forEach(I=>{if(I.nodeType===Node.ELEMENT_NODE){const T=I;(T.matches("form, [data-form-container]")||T.querySelector("form, [data-form-container]")||T.matches('input, textarea, select, button, [role="button"], [role="combobox"]'))&&(V=!0)}})}),V&&setTimeout(a,50)});return M.observe(document.body,{childList:!0,subtree:!0}),()=>M.disconnect()})(),b=document.createElement("style");return b.setAttribute("data-mobile-optimizer","true"),b.textContent=`
      /* Enhanced mobile form optimizations */
      .touch-manipulation {
        touch-action: manipulation;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
      }
      
      /* Gentle validation feedback colors */
      .border-amber-300 {
        border-color: #fcd34d;
      }
      
      .border-green-300 {
        border-color: #86efac;
      }
      
      @media (max-width: 768px) {
        /* Ensure all interactive elements meet touch target guidelines */
        input:not([type="hidden"]), 
        textarea, 
        select, 
        button, 
        [role="button"], 
        [role="combobox"] {
          min-height: 48px !important;
          min-width: 48px !important;
          font-size: 16px !important;
          touch-action: manipulation;
        }
        
        /* Enhanced button spacing on mobile */
        button + button,
        [role="button"] + [role="button"] {
          margin-left: 12px;
        }
        
        /* Better form field spacing */
        .form-field,
        [data-testid*="input"],
        [data-testid*="select"] {
          margin-bottom: 1.5rem;
        }
        
        /* Improved focus states for mobile */
        input:focus,
        textarea:focus,
        select:focus {
          outline: none;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
          border-color: #3b82f6;
        }
        
        /* Ensure proper touch targets for critical links */
        a[data-testid*="link"] {
          min-height: 44px;
          display: inline-flex;
          align-items: center;
          padding: 8px 12px;
        }
      }
      
      /* Progress indicator styles */
      .form-progress {
        position: sticky;
        top: 0;
        z-index: 10;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 1rem;
        border-bottom: 1px solid #e5e7eb;
      }
      
      @media (max-width: 768px) {
        .form-progress {
          padding: 0.75rem;
        }
      }
    `,document.head.appendChild(b),()=>{n.current.forEach(f=>f()),n.current=[],h(),o.current=new WeakSet;const M=document.head.querySelector("[data-mobile-optimizer]");M&&document.head.removeChild(M)}},[]),null}const oe=c.forwardRef(({className:n,type:o,validationRules:a=[],showValidation:x=!0,debounceMs:h=300,onValidationChange:b,placeholder:M,...f},V)=>{const[P,I]=c.useState(f.value||""),[T,S]=c.useState(!1),[r,L]=c.useState(!1),[m,A]=c.useState({isValid:!0,errors:[],warnings:[]}),j=c.useRef(),t=c.useRef(),C=c.useCallback(async p=>{var s,l,u;if(!a.length||!x){A({isValid:!0,errors:[],warnings:[]}),b==null||b(!0,[]);return}t.current&&t.current.abort(),t.current=new AbortController,S(!0);try{const i=[],R=[];for(const E of a)try{await Promise.resolve(E.test(p))||(E.type==="warning"?R.push(E.message):i.push(E.message))}catch{i.push(E.message)}if(!((s=t.current)!=null&&s.signal.aborted)){const E={isValid:i.length===0,errors:i,warnings:R};A(E),b==null||b(E.isValid,i)}}catch{(l=t.current)!=null&&l.signal.aborted||(A({isValid:!1,errors:["Erreur de validation"],warnings:[]}),b==null||b(!1,["Erreur de validation"]))}finally{(u=t.current)!=null&&u.signal.aborted||S(!1)}},[a,x,b]),q=c.useCallback(p=>{j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{C(p)},h)},[C,h]),$=p=>{var l;const s=p.target.value;I(s),(l=f.onChange)==null||l.call(f,p),x&&a.length>0&&q(s)};c.useEffect(()=>{P&&a.length>0&&x&&C(P.toString())},[C,a.length,x,P]),c.useEffect(()=>()=>{j.current&&clearTimeout(j.current),t.current&&t.current.abort()},[]);const F=()=>!x||a.length===0?null:T?e.jsx(ie,{className:"h-4 w-4 animate-spin text-blue-500"}):m.errors.length>0?e.jsx(se,{className:"h-4 w-4 text-red-500"}):m.warnings.length>0?e.jsx(ae,{className:"h-4 w-4 text-yellow-500"}):P&&m.isValid?e.jsx(ce,{className:"h-4 w-4 text-green-500"}):null,D=()=>{if(!x||a.length===0)return n;let p="flex h-10 w-full rounded-md border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";return m.errors.length>0?p+=" border-red-500 focus-visible:ring-red-500":m.warnings.length>0?p+=" border-yellow-500 focus-visible:ring-yellow-500":P&&m.isValid?p+=" border-green-500 focus-visible:ring-green-500":p+=" border-input focus-visible:ring-ring",de(p,n)},{onFocus:H,onBlur:O,value:re,onChange:K,...Q}=f;return e.jsxs("div",{className:"relative",children:[e.jsx("input",{...Q,type:o,className:D(),ref:V,value:P,onChange:$,placeholder:r?"":M,onFocus:p=>{L(!0),H==null||H(p)},onBlur:p=>{L(!1),O==null||O(p)}}),x&&a.length>0&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:F()}),x&&(m.errors.length>0||m.warnings.length>0)&&e.jsxs("div",{className:"mt-1 space-y-1",children:[m.errors.map((p,s)=>e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(se,{className:"h-3 w-3"}),p]},`error-${s}`)),m.warnings.map((p,s)=>e.jsxs("p",{className:"text-sm text-yellow-600 flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3"}),p]},`warning-${s}`))]})]})});oe.displayName="InputWithValidation";function B({control:n,name:o,label:a,placeholder:x,description:h,type:b="text",validationRules:M=[],showValidation:f=!0,debounceMs:V=300,required:P=!1,className:I,disabled:T=!1}){const[S,r]=c.useState({isValid:!0,errors:[]}),L=c.useCallback((m,A)=>{r({isValid:m,errors:A})},[]);return e.jsx(v,{control:n,name:o,render:({field:m,fieldState:A})=>e.jsxs(y,{className:I,children:[e.jsx(N,{className:P?"after:content-['*'] after:ml-0.5 after:text-red-500":"",children:a}),e.jsx(w,{children:e.jsx(oe,{type:b,placeholder:x,validationRules:M,showValidation:f,debounceMs:V,onValidationChange:L,disabled:T,"data-testid":`input-${o}`,...m})}),h&&e.jsx(me,{children:h}),A.error&&e.jsx(k,{children:A.error.message}),!A.error&&!S.isValid&&S.errors.length>0&&e.jsx("div",{className:"space-y-1",children:S.errors.map((j,t)=>e.jsx("p",{className:"text-sm font-medium text-destructive",children:j},t))})]})})}const Pe=[{test:n=>n?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n):!0,message:"Format d'email invalide",type:"error"},{test:n=>{if(!n)return!0;const o=["gmail.com","yahoo.fr","hotmail.com","outlook.com","orange.fr","wanadoo.fr","free.fr","laposte.net"],a=n.split("@")[1];return o.includes(a)||!0},message:"V√©rifiez que le domaine email est correct",type:"warning"}],Ae=[{test:n=>{if(!n)return!0;const o=n.replace(/[\s\.\-]/g,"");return/^(?:(?:\+33|0)[1-9])(?:[0-9]{8})$/.test(o)},message:"Num√©ro de t√©l√©phone fran√ßais invalide",type:"error"},{test:n=>{if(!n)return!0;const o=n.replace(/[\s\.\-]/g,"");return o.length===10||o.length===12},message:"Le num√©ro doit contenir 10 chiffres",type:"error"}],ne=[{test:n=>n?n.trim().length>=2:!0,message:"Le nom doit contenir au moins 2 caract√®res",type:"error"},{test:n=>n?/^[a-zA-Z√Ä-√ø\s\-']+$/.test(n):!0,message:"Le nom ne peut contenir que des lettres, espaces, tirets et apostrophes",type:"error"}],le=[{test:n=>{if(!n)return!0;const o=n.replace(/\s/g,"");return/^[0-9]{9}$/.test(o)},message:"Le SIREN doit contenir 9 chiffres",type:"error"},{test:n=>{if(!n)return!0;const o=n.replace(/\s/g,"");if(o.length!==9)return!1;let a=0;for(let x=0;x<9;x++){let h=parseInt(o[x]);x%2===1&&(h*=2,h>9&&(h=Math.floor(h/10)+h%10)),a+=h}return a%10===0},message:"Num√©ro SIREN invalide",type:"error"}],Te={test:n=>n.trim().length>0,message:"Ce champ est obligatoire",type:"error"},Z=(n,o=!1)=>{const a=n.flat();return o?[Te,...a]:a};function Me({form:n}){const o=n.watch("clientType");return e.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-sm border border-gray-100 p-2 md:p-8",children:[e.jsxs("div",{className:"mb-1 md:mb-6",children:[e.jsx("h2",{className:"text-base md:text-2xl font-semibold text-gray-900 mb-0.5 tracking-tight",children:"Informations personnelles"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 leading-tight md:leading-normal",children:"Remplissez vos coordonn√©es personnelles pour traiter votre demande de raccordement √©lectrique."})]}),e.jsxs("div",{className:"space-y-1 md:space-y-3",children:[e.jsx(v,{control:n.control,name:"clientType",render:({field:a})=>e.jsxs(y,{className:"space-y-0.5",children:[e.jsxs(N,{className:"text-xs md:text-base font-medium text-gray-700 flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full flex-shrink-0"}),e.jsx("span",{children:"Type de client *"})]}),e.jsx(w,{children:e.jsxs("div",{children:[e.jsx("div",{className:"block md:hidden",children:e.jsxs(J,{onValueChange:a.onChange,value:a.value,children:[e.jsx(G,{className:"min-h-[64px] h-16 w-full bg-white border-2 border-gray-300 rounded-2xl shadow-sm hover:border-blue-500 focus:border-blue-600 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-700 font-medium text-base px-4 py-3 cursor-pointer active:scale-[0.98] touch-manipulation",children:e.jsxs("div",{className:"flex items-center gap-4 w-full",children:[a.value==="particulier"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Particulier"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Raccordement r√©sidentiel"})]})]}),a.value==="professionnel"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Professionnel"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Entreprise ou commerce"})]})]}),a.value==="collectivite"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Collectivit√©"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Institution publique"})]})]}),!a.value&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center border border-gray-200",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),e.jsx("span",{className:"text-gray-500 font-medium",children:"S√©lectionnez votre type de client"})]})]})}),e.jsxs(U,{className:"bg-white border-2 border-gray-200 rounded-2xl shadow-2xl mt-3 z-50 max-h-[280px] overflow-y-auto",children:[e.jsx(g,{value:"particulier",className:"px-4 py-3 hover:bg-blue-50 cursor-pointer touch-manipulation min-h-[60px] focus:bg-blue-50 active:bg-blue-100 transition-all duration-200 rounded-lg mx-0 my-1 border-2 border-transparent hover:border-blue-300 data-[state=checked]:border-blue-600 data-[state=checked]:bg-blue-50",children:e.jsxs("div",{className:"flex items-center gap-3 w-full relative",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:"Particulier"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Domicile r√©sidentiel"})]})]})}),e.jsx(g,{value:"professionnel",className:"px-4 py-3 hover:bg-orange-50 cursor-pointer touch-manipulation min-h-[60px] focus:bg-orange-50 active:bg-orange-100 transition-all duration-200 rounded-lg mx-0 my-1 border-2 border-transparent hover:border-orange-300 data-[state=checked]:border-orange-600 data-[state=checked]:bg-orange-50",children:e.jsxs("div",{className:"flex items-center gap-3 w-full relative",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:"Professionnel"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Entreprise & commerce"})]})]})}),e.jsx(g,{value:"collectivite",className:"px-4 py-3 hover:bg-green-50 cursor-pointer touch-manipulation min-h-[60px] focus:bg-green-50 active:bg-green-100 transition-all duration-200 rounded-lg mx-0 my-1 border-2 border-transparent hover:border-green-300 data-[state=checked]:border-green-600 data-[state=checked]:bg-green-50",children:e.jsxs("div",{className:"flex items-center gap-3 w-full relative",children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:"Collectivit√©"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Entit√© publique"})]})]})})]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[e.jsx("div",{onClick:()=>a.onChange("particulier"),className:`relative cursor-pointer border-2 rounded-lg p-4 transition-all duration-200 hover:shadow-md ${a.value==="particulier"?"border-blue-600 bg-blue-50":"border-gray-300 bg-white hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${a.value==="particulier"?"bg-blue-600 text-white":"bg-blue-100 text-blue-600"}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Particulier"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Domicile r√©sidentiel"})]})]})}),e.jsx("div",{onClick:()=>a.onChange("professionnel"),className:`relative cursor-pointer border-2 rounded-lg p-4 transition-all duration-200 hover:shadow-md ${a.value==="professionnel"?"border-orange-600 bg-orange-50":"border-gray-300 bg-white hover:border-orange-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${a.value==="professionnel"?"bg-orange-600 text-white":"bg-orange-100 text-orange-600"}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Professionnel"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Entreprise & commerce"})]})]})}),e.jsx("div",{onClick:()=>a.onChange("collectivite"),className:`relative cursor-pointer border-2 rounded-lg p-4 transition-all duration-200 hover:shadow-md ${a.value==="collectivite"?"border-green-600 bg-green-50":"border-gray-300 bg-white hover:border-green-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${a.value==="collectivite"?"bg-green-600 text-white":"bg-green-100 text-green-600"}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Collectivit√©"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Entit√© publique"})]})]})})]})})]})}),e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1 md:gap-4",children:[e.jsx(B,{control:n.control,name:"nom",label:"Nom",placeholder:"Votre nom de famille",validationRules:Z([ne],!0),required:!0,className:"space-y-0.5"}),e.jsx(B,{control:n.control,name:"prenom",label:"Pr√©nom",placeholder:"Votre pr√©nom",validationRules:Z([ne],!0),required:!0,className:"space-y-0.5"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1 md:gap-4",children:[e.jsx(B,{control:n.control,name:"email",label:"Email",placeholder:"votre@email.com",type:"email",validationRules:Z([Pe],!0),required:!0,className:"space-y-0.5"}),e.jsx(B,{control:n.control,name:"phone",label:"T√©l√©phone",placeholder:"Votre num√©ro de t√©l√©phone",type:"tel",validationRules:Z([Ae],!0),required:!0,className:"space-y-0.5"})]}),o==="professionnel"&&e.jsxs("div",{className:"space-y-1 md:space-y-3 pt-2 border-t border-gray-200",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm md:text-base mb-1",children:"Informations professionnelles"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1 md:gap-4",children:[e.jsx(v,{control:n.control,name:"raisonSociale",render:({field:a})=>e.jsxs(y,{children:[e.jsx(N,{className:"text-xs md:text-sm font-medium text-gray-700",children:"Raison sociale"}),e.jsx(w,{children:e.jsx(z,{...a,placeholder:"Nom de votre entreprise",className:"h-10 md:h-12 bg-white border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-sm md:text-base"})}),e.jsx(k,{})]})}),e.jsx(B,{control:n.control,name:"siren",label:"SIREN",placeholder:"123 456 789",validationRules:le,description:"Num√©ro d'identification de votre entreprise"})]})]}),o==="collectivite"&&e.jsxs("div",{className:"space-y-1 md:space-y-3 pt-2 border-t border-gray-200",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm md:text-base mb-1",children:"Informations de la collectivit√©"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1 md:gap-4",children:[e.jsx(v,{control:n.control,name:"nomCollectivite",render:({field:a})=>e.jsxs(y,{children:[e.jsx(N,{className:"text-xs md:text-sm font-medium text-gray-700",children:"Nom de la collectivit√©"}),e.jsx(w,{children:e.jsx(z,{...a,placeholder:"Nom de la collectivit√©",className:"h-10 md:h-12 bg-white border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-sm md:text-base"})}),e.jsx(k,{})]})}),e.jsx(B,{control:n.control,name:"sirenCollectivite",label:"SIREN",placeholder:"123 456 789",validationRules:le,description:"Num√©ro d'identification de votre collectivit√©"})]})]})]})]})}const Ee=()=>{const[n,o]=c.useState(!1),[a,x]=c.useState(!1);return c.useEffect(()=>{const h=()=>{o(window.innerWidth<=768)};h(),window.addEventListener("resize",h);const b=setTimeout(()=>x(!0),100);return()=>{window.removeEventListener("resize",h),clearTimeout(b)}},[]),{isMobile:n,isPageLoaded:a}},Re=d.object({clientType:d.enum(["particulier","professionnel","collectivite"]),nom:d.string().min(2,"Le nom doit contenir au moins 2 caract√®res"),prenom:d.string().min(2,"Le pr√©nom doit contenir au moins 2 caract√®res"),email:d.string().email("L'email doit √™tre valide"),phone:d.string().refine(n=>{const o=n.replace(/[\s\.\-]/g,"");return/^(0[1-9]\d{8}|\+33[1-9]\d{8})$/.test(o)},"Format t√©l√©phone invalide (ex: 06 12 34 56 78)"),raisonSociale:d.string().optional(),siren:d.string().optional(),nomCollectivite:d.string().optional(),sirenCollectivite:d.string().optional(),adresse:d.string().optional(),complementAdresse:d.string().optional(),codePostal:d.string().optional(),ville:d.string().optional(),adresseProjet:d.string().min(5,"L'adresse du projet doit √™tre compl√®te"),complementAdresseProjet:d.string().optional(),codePostalProjet:d.string().regex(/^\d{5}$/,"Code postal invalide (5 chiffres)"),villeProjet:d.string().min(2,"La ville est requise"),typeRaccordement:d.enum(["nouveau","provisoire","augmentation","deplacement","autre"]),autreTypeRaccordement:d.string().optional(),typeProjet:d.enum(["maison","immeuble","commercial","industriel","terrain"]),terrainViabilise:d.boolean().optional(),typeAlimentation:d.enum(["monophase","triphase","inconnu"]),puissance:d.string().optional(),adresseFacturationDifferente:d.boolean().optional(),adresseFacturation:d.string().optional(),facturationDifferente:d.boolean().optional(),newsletterOptIn:d.boolean().optional(),consentementTraitement:d.boolean()}).refine(n=>{var o;return!(n.facturationDifferente&&!((o=n.adresseFacturation)!=null&&o.trim()))},{message:"L'adresse de facturation est obligatoire quand cette option est activ√©e",path:["adresseFacturation"]});function _e(){const{isMobile:n,isPageLoaded:o}=Ee(),[a,x]=c.useState(1),[h,b]=c.useState(!1),[M,f]=c.useState(!1),[V,P]=c.useState({name:"",email:"",message:""}),[I,T]=c.useState(!1),[S,r]=c.useState(!1),L=c.useRef(),m=c.useRef(null),A=c.useCallback(async(s,l=!1)=>{if(s.length===5)try{l?T(!0):r(!0);const u=await fetch(`https://geo.api.gouv.fr/communes?codePostal=${s}&fields=nom,codesPostaux&format=json&geometry=centre`);if(u.ok){const i=await u.json();if(i&&i.length>0){const R=i[0].nom;setTimeout(()=>{var E,X;l?((E=m.current)==null||E.setValue("ville",R),T(!1)):((X=m.current)==null||X.setValue("villeProjet",R),r(!1))},300)}else l?T(!1):r(!1)}else l?T(!1):r(!1)}catch(u){console.log("Erreur lors de la r√©cup√©ration de la ville:",u),l?T(!1):r(!1)}},[]),j=()=>{window.scrollTo({top:0,behavior:"smooth"})};c.useEffect(()=>{j()},[a]);const t=ue({resolver:ye(Re),defaultValues:{clientType:"particulier",nom:"",prenom:"",email:"",phone:"",raisonSociale:"",siren:"",nomCollectivite:"",sirenCollectivite:"",adresse:"",complementAdresse:"",codePostal:"",ville:"",typeRaccordement:void 0,autreTypeRaccordement:"",typeProjet:void 0,terrainViabilise:!1,typeAlimentation:"inconnu",puissance:"",adresseFacturationDifferente:!1,adresseFacturation:"",adresseProjet:"",complementAdresseProjet:"",codePostalProjet:"",villeProjet:"",facturationDifferente:!1,newsletterOptIn:!1,consentementTraitement:!1}});m.current=t,c.useCallback((s,l)=>{L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{l.trim()&&t.trigger(s)},300)},[t]);const C=t.watch("clientType"),q=t.watch("codePostal"),$=t.watch("typeRaccordement");c.useEffect(()=>{q&&q.length===5&&(async()=>{try{const u=await(await fetch(`https://geo.api.gouv.fr/communes?codePostal=${q}&fields=nom&format=json&geometry=centre`)).json();u&&u.length>0&&t.setValue("ville",u[0].nom)}catch(l){console.log("Erreur lors de la r√©cup√©ration de la ville:",l);const i={75001:"Paris",75002:"Paris",75003:"Paris",75004:"Paris",75005:"Paris",69001:"Lyon",69002:"Lyon",69003:"Lyon",69004:"Lyon",69005:"Lyon",13001:"Marseille",13002:"Marseille",13003:"Marseille",13004:"Marseille",31e3:"Toulouse",31100:"Toulouse",31200:"Toulouse",31300:"Toulouse",59e3:"Lille",59160:"Lille",59260:"Lille",59777:"Lille",44e3:"Nantes",44100:"Nantes",44200:"Nantes",44300:"Nantes",67e3:"Strasbourg",67100:"Strasbourg",67200:"Strasbourg",34e3:"Montpellier",34070:"Montpellier",34080:"Montpellier",33e3:"Bordeaux",33100:"Bordeaux",33200:"Bordeaux",33300:"Bordeaux",35e3:"Rennes",35200:"Rennes",35700:"Rennes"}[q];i&&t.setValue("ville",i)}})()},[q,t]);const F=async(s,l)=>{try{const u=await fetch("/api/notifications/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:s,data:l,timestamp:new Date().toISOString()})});console.log(`Notification ${s} envoy√©e`)}catch(u){console.error("Erreur notification:",u)}},D=async()=>{let s=[];if(a===1){s=["clientType","nom","prenom","email","phone"];const l=t.getValues();if(l.email&&localStorage.setItem("user_email",l.email),l.phone&&localStorage.setItem("user_phone",l.phone),l.prenom&&localStorage.setItem("user_first_name",l.prenom),l.nom&&localStorage.setItem("user_last_name",l.nom),C==="professionnel"?s.push("raisonSociale","siren"):C==="collectivite"&&s.push("nomCollectivite","sirenCollectivite"),await t.trigger(s)){const i=t.getValues().email||"",R=t.getValues().phone||"";we(i,R),x(a+1),H()}}else a===2&&(s=["adresseProjet","codePostalProjet","villeProjet","typeRaccordement","typeProjet","typeAlimentation"],t.watch("typeAlimentation")!=="inconnu"&&s.push("puissance"),await t.trigger(s)&&(await O(),x(a+1)))},H=async()=>{try{const s=t.getValues(),l=await fetch("/api/leads/prelead-with-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientType:s.clientType,nom:s.nom,prenom:s.prenom,email:s.email,phone:s.phone,raisonSociale:s.raisonSociale,siren:s.siren,nomCollectivite:s.nomCollectivite,sirenCollectivite:s.sirenCollectivite,sendNotification:!0})});if(l.ok){const u=await l.json();sessionStorage.setItem("preleadId",u.leadId),console.log("‚úÖ Prelead cr√©√© avec succ√®s:",u.referenceNumber)}else console.error("Erreur API prelead optimis√©:",l.status)}catch(s){console.error("Erreur cr√©ation prelead optimis√©:",s)}},O=async()=>{try{const s=t.getValues(),l=sessionStorage.getItem("preleadId"),u=await fetch("/api/leads/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({preleadId:l,adresse:s.adresse,complementAdresse:s.complementAdresse,codePostal:s.codePostal,ville:s.ville,typeRaccordement:s.typeRaccordement,typeProjet:s.typeProjet})});if(u.ok){const i=await u.json();await F("lead_completed",i)}}catch(s){console.error("Erreur completion lead:",s)}},re=()=>{a>1&&x(a-1)},K=async s=>{console.log("üöÄ D√©but de soumission du formulaire",s),b(!0);try{const l=`RAC-${Math.floor(1e3+Math.random()*9e3)}-${Math.floor(1e5+Math.random()*9e5)}`;console.log("üìù R√©f√©rence g√©n√©r√©e:",l);const u=Le(),i={name:`${s.prenom||""} ${s.nom||""}`.trim(),email:s.email,phone:s.phone,address:s.adresseProjet,city:s.villeProjet,postalCode:s.codePostalProjet,serviceType:"electricity",requestType:s.typeRaccordement==="provisoire"?"temporary_connection":"new_connection",buildingType:s.typeProjet==="immeuble"?"apartment_building":"individual_house",projectStatus:"planning",powerRequired:s.puissance||"12",reference:l,gclid:u||void 0,clientType:s.clientType,prenom:s.prenom,complementAdresse:s.complementAdresse,typeAlimentation:s.typeAlimentation,adresseFacturationDifferente:s.adresseFacturationDifferente,newsletterOptIn:s.newsletterOptIn,consentementTraitement:s.consentementTraitement},R=await fetch("/api/service-requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!R.ok)throw new Error("Erreur lors de l'envoi de la demande");const E=await R.json();ke(l,i.email,i.phone),await fetch("/api/notifications/request-completed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.name,email:i.email,phone:i.phone,referenceNumber:l,address:i.address,city:i.city,postalCode:i.postalCode,requestType:i.requestType,buildingType:i.buildingType,powerRequired:i.powerRequired,company:s.raisonSociale||"",clientType:s.clientType,prenom:s.prenom,nom:s.nom,typeRaccordement:s.typeRaccordement,typeProjet:s.typeProjet,typeAlimentation:s.typeAlimentation,puissance:s.puissance,complementAdresse:s.complementAdresse,complementAdresseProjet:s.complementAdresseProjet,raisonSociale:s.raisonSociale,siren:s.siren,nomCollectivite:s.nomCollectivite,sirenCollectivite:s.sirenCollectivite,adresseFacturationDifferente:s.adresseFacturationDifferente,adresseFacturation:s.adresseFacturation||"",terrainViabilise:s.terrainViabilise,autreTypeRaccordement:s.autreTypeRaccordement||"",adresseComplete:s.adresse||"",codePostalComplete:s.codePostal||"",villeComplete:s.ville||"",timestamp:new Date().toISOString()})}),queueMicrotask(()=>{window.location.href=`/confirmation/${l}`})}catch(l){console.error("Erreur:",l)}finally{b(!1)}},Q=()=>e.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-sm border border-gray-100 p-4 md:p-8",children:[e.jsxs("div",{className:"mb-3 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-semibold text-gray-900 mb-1 tracking-tight",children:"D√©tails du projet"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed",children:"Informations sur votre projet de raccordement √©lectrique"})]}),e.jsxs("div",{className:"space-y-0 md:space-y-3",children:[e.jsxs("div",{className:"space-y-1 md:space-y-3",children:[e.jsxs("h3",{className:"text-sm md:text-lg font-medium text-gray-900 flex items-center gap-2 mb-1",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Adresse du projet"]}),e.jsx(v,{control:t.control,name:"adresseProjet",render:({field:s})=>e.jsxs(y,{className:"space-y-1",children:[e.jsxs(N,{className:"text-sm font-medium text-gray-700 mb-1 block",children:[e.jsx("span",{className:"text-blue-600",children:"Adresse compl√®te du projet"})," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(w,{children:e.jsx(z,{placeholder:"12 avenue de la R√©publique",autoComplete:"street-address",className:"h-12 text-base bg-white border border-gray-300 rounded-lg px-4 py-3 placeholder-gray-500 hover:border-green-400 focus:border-green-500 focus:ring-2 focus:ring-green-100 transition-all duration-200 touch-manipulation",...s})}),e.jsx(k,{className:"text-xs text-red-600"})]})}),e.jsx(v,{control:t.control,name:"complementAdresseProjet",render:({field:s})=>e.jsxs(y,{className:"space-y-1",children:[e.jsx(N,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Compl√©ment d'adresse du projet"}),e.jsx(w,{children:e.jsx(z,{placeholder:"Pr√©cisions sur l'emplacement du projet...",autoComplete:"address-line2",className:"h-12 text-base bg-white border border-gray-300 rounded-lg px-4 py-3 placeholder-gray-500 hover:border-green-400 focus:border-green-500 focus:ring-2 focus:ring-green-100 transition-all duration-200 touch-manipulation",...s})}),e.jsx(k,{className:"text-xs text-red-600"})]})}),e.jsxs("div",{className:"space-y-4 md:grid md:grid-cols-2 md:gap-6 md:space-y-0 mt-6",children:[e.jsx(v,{control:t.control,name:"codePostalProjet",render:({field:s})=>e.jsxs(y,{className:"space-y-2",children:[e.jsxs(N,{className:"text-sm font-medium text-gray-700 mb-2 block",children:[e.jsx("span",{className:"text-blue-600",children:"Code postal du projet"})," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(w,{children:e.jsx(z,{placeholder:"75001",autoComplete:"postal-code",inputMode:"numeric",pattern:"[0-9]*",maxLength:5,className:"h-12 text-base bg-white border border-gray-300 rounded-lg px-4 py-3 placeholder-gray-500 hover:border-green-400 focus:border-green-500 focus:ring-2 focus:ring-green-100 transition-all duration-200 touch-manipulation",...s,onChange:l=>{s.onChange(l),A(l.target.value,!1)}})}),e.jsx(k,{className:"text-xs text-red-600"})]})}),e.jsx(v,{control:t.control,name:"villeProjet",render:({field:s})=>e.jsxs(y,{className:"space-y-2 mb-4 md:mb-auto",children:[e.jsxs(N,{className:"text-sm font-medium text-gray-700 mb-2 block",children:[e.jsx("span",{className:"text-blue-600",children:"Ville du projet"})," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{placeholder:"Ville du projet",autoComplete:"address-level2",className:"h-12 text-base bg-white border border-gray-300 rounded-lg px-4 py-3 pr-10 placeholder-gray-500 hover:border-green-400 focus:border-green-500 focus:ring-2 focus:ring-green-100 transition-all duration-200 touch-manipulation",...s}),S&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsxs("svg",{className:"w-4 h-4 text-green-500 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})}),e.jsx(k,{className:"text-xs text-red-600 mb-0"})]})})]})]}),e.jsxs("div",{className:"mt-6 mb-6 md:mt-6 md:mb-6","data-testid":"facturation-toggle",children:[e.jsx(v,{control:t.control,name:"facturationDifferente",render:({field:s})=>e.jsx(y,{className:"space-y-2",children:e.jsxs("div",{onClick:()=>s.onChange(!s.value),className:`
                    flex items-center justify-between p-5 rounded-xl border-2 cursor-pointer transition-all duration-300 touch-manipulation
                    ${s.value?"bg-green-50 border-green-500 shadow-lg hover:shadow-xl":"bg-gray-50 border-gray-300 hover:bg-green-50/30 hover:border-green-400 shadow-md hover:shadow-lg"}
                  `,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("svg",{className:`w-6 h-6 flex-shrink-0 transition-colors duration-300 ${s.value?"text-green-600":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsxs("div",{children:[e.jsx("span",{className:`text-base font-semibold transition-colors duration-300 ${s.value?"text-green-800":"text-gray-700"}`,children:"Utiliser une adresse de facturation diff√©rente"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.value?"Adresse de facturation personnalis√©e activ√©e":"Cliquez pour utiliser une adresse diff√©rente"})]})]}),e.jsx("div",{className:`
                    relative w-14 h-8 rounded-full transition-all duration-300 flex-shrink-0
                    ${s.value?"bg-green-500":"bg-gray-400"}
                  `,children:e.jsx("div",{className:`
                      absolute top-1 w-6 h-6 bg-white rounded-full shadow-md transition-transform duration-300
                      ${s.value?"transform translate-x-6":"transform translate-x-1"}
                    `})})]})})}),t.watch("facturationDifferente")&&e.jsxs("div",{className:"space-y-1 p-3 bg-blue-50/50 rounded-lg border border-blue-200/60",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Adresse de facturation"}),e.jsx(v,{control:t.control,name:"adresseFacturation",render:({field:s})=>e.jsxs(y,{className:"space-y-1",children:[e.jsxs(N,{className:"text-sm font-medium text-gray-700 mb-1 block",children:[e.jsx("span",{className:"text-blue-600",children:"Adresse compl√®te de facturation"})," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(w,{children:e.jsx(z,{placeholder:"123 rue de la R√©publique",autoComplete:"billing-address-line1",className:"h-12 text-base bg-white border border-gray-300 rounded-lg px-4 py-3 placeholder-gray-500 hover:border-blue-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all duration-200 touch-manipulation",...s})}),e.jsx(k,{className:"text-xs text-red-600"})]})}),e.jsx(v,{control:t.control,name:"complementAdresse",render:({field:s})=>e.jsxs(y,{className:"space-y-1",children:[e.jsx(N,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Compl√©ment d'adresse"}),e.jsx(w,{children:e.jsx(z,{placeholder:"B√¢timent, √©tage, appartement...",autoComplete:"billing-address-line2",className:"h-12 text-base bg-white border border-gray-300 rounded-lg px-4 py-3 placeholder-gray-500 hover:border-blue-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all duration-200 touch-manipulation",...s})}),e.jsx(k,{className:"text-xs text-red-600"})]})}),e.jsxs("div",{className:"space-y-1 md:grid md:grid-cols-2 md:gap-6 md:space-y-0",children:[e.jsx(v,{control:t.control,name:"codePostal",render:({field:s})=>e.jsxs(y,{className:"space-y-1",children:[e.jsxs(N,{className:"text-sm font-medium text-gray-700 mb-1 block",children:[e.jsx("span",{className:"text-blue-600",children:"Code postal"})," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(w,{children:e.jsx(z,{placeholder:"75001",autoComplete:"billing-postal-code",inputMode:"numeric",pattern:"[0-9]*",maxLength:5,className:"h-12 text-base bg-white border border-gray-300 rounded-lg px-4 py-3 placeholder-gray-500 hover:border-blue-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all duration-200 touch-manipulation",...s,onChange:l=>{s.onChange(l),A(l.target.value,!0)}})}),e.jsx(k,{className:"text-xs text-red-600"})]})}),e.jsx(v,{control:t.control,name:"ville",render:({field:s})=>e.jsxs(y,{className:"space-y-1",children:[e.jsxs(N,{className:"text-sm font-medium text-gray-700 mb-1 block",children:[e.jsx("span",{className:"text-blue-600",children:"Ville"})," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(w,{children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{placeholder:"Ville",autoComplete:"billing-address-level2",className:"h-12 text-base bg-white border border-gray-300 rounded-lg px-4 py-3 pr-10 placeholder-gray-500 hover:border-blue-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all duration-200 touch-manipulation",...s}),I&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsxs("svg",{className:"w-4 h-4 text-blue-500 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})}),e.jsx(k,{className:"text-xs text-red-600"})]})})]})]})]}),e.jsxs("div",{className:"space-y-6 md:grid md:grid-cols-2 md:gap-8 md:space-y-0 mt-6 md:mt-6",children:[e.jsx(v,{control:t.control,name:"typeRaccordement",render:({field:s})=>e.jsxs(y,{className:"space-y-2",children:[e.jsxs(N,{className:"text-sm md:text-base font-semibold text-gray-800 mb-2",children:[e.jsx("span",{className:"text-blue-600",children:"Type de raccordement"})," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(J,{onValueChange:s.onChange,value:s.value,children:[e.jsx(w,{children:e.jsx(G,{className:"h-14 border-gray-300 bg-white hover:border-blue-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-400 transition-colors text-base font-medium",children:e.jsx(Y,{placeholder:"Type de raccordement",className:"text-gray-700"})})}),e.jsxs(U,{className:"bg-white border-2 border-gray-200 rounded-2xl shadow-2xl max-h-80 overflow-y-auto",children:[e.jsx(g,{value:"nouveau",className:"h-14 px-4 py-3 hover:bg-blue-50 focus:bg-blue-50 cursor-pointer",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Nouveau raccordement"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Premi√®re installation √©lectrique"})]})}),e.jsx(g,{value:"provisoire",className:"h-14 px-4 py-3 hover:bg-orange-50 focus:bg-orange-50 cursor-pointer",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Raccordement provisoire"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Installation temporaire (chantier, √©v√©nement)"})]})}),e.jsx(g,{value:"augmentation",className:"h-14 px-4 py-3 hover:bg-green-50 focus:bg-green-50 cursor-pointer",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Augmentation de puissance"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Modifier la puissance existante"})]})}),e.jsx(g,{value:"deplacement",className:"h-14 px-4 py-3 hover:bg-purple-50 focus:bg-purple-50 cursor-pointer",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"D√©placement de compteur"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Changer l'emplacement du compteur"})]})}),e.jsx(g,{value:"autre",className:"h-14 px-4 py-3 hover:bg-gray-50 focus:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Autre demande"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Situation particuli√®re √† pr√©ciser"})]})})]})]}),e.jsx(k,{})]})}),$==="autre"&&e.jsx("div",{className:"md:col-span-2",children:e.jsx(v,{control:t.control,name:"autreTypeRaccordement",render:({field:s})=>e.jsxs(y,{className:"space-y-1.5",children:[e.jsxs(N,{className:"text-sm md:text-base font-semibold text-gray-800 flex items-center gap-2 mb-1.5",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),e.jsx("span",{className:"text-blue-600",children:"Pr√©cisez le type de raccordement"})," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(w,{children:e.jsx("textarea",{placeholder:"D√©crivez pr√©cis√©ment votre type de raccordement, vos besoins sp√©cifiques et toute information compl√©mentaire...",rows:3,className:`
                          min-h-[80px] text-base resize-none
                          bg-white border border-orange-300 rounded-lg 
                          px-3 md:px-4 py-2.5 md:py-3
                          placeholder-gray-500
                          hover:border-orange-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-100
                          transition-all duration-200
                          touch-manipulation
                          w-full
                        `,...s})}),e.jsx(k,{className:"text-xs text-red-600"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exemple: raccordement temporaire pour chantier, raccordement pour borne de recharge, etc."})]})})}),e.jsx(v,{control:t.control,name:"typeProjet",render:({field:s})=>e.jsxs(y,{className:"space-y-2 mb-4 md:mb-auto",children:[e.jsxs(N,{className:"text-sm md:text-base font-semibold text-gray-800 mb-2",children:[e.jsx("span",{className:"text-blue-600",children:"Type de projet"})," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(J,{onValueChange:s.onChange,value:s.value,children:[e.jsx(w,{children:e.jsx(G,{className:"h-14 border-gray-300 bg-white hover:border-blue-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-400 transition-colors text-base font-medium",children:e.jsx(Y,{placeholder:"Type de projet",className:"text-gray-700"})})}),e.jsxs(U,{className:"bg-white border-2 border-gray-200 rounded-2xl shadow-2xl max-h-80 overflow-y-auto",children:[e.jsx(g,{value:"maison",className:"h-16 md:h-14 px-4 py-3 hover:bg-blue-50 focus:bg-blue-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Maison individuelle"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Habitation unifamiliale, villa"})]})]})}),e.jsx(g,{value:"immeuble",className:"h-16 md:h-14 px-4 py-3 hover:bg-purple-50 focus:bg-purple-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-purple-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Immeuble collectif"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Appartements, r√©sidence, copropri√©t√©"})]})]})}),e.jsx(g,{value:"commercial",className:"h-16 md:h-14 px-4 py-3 hover:bg-orange-50 focus:bg-orange-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-orange-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Local commercial"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Magasin, bureau, restaurant"})]})]})}),e.jsx(g,{value:"industriel",className:"h-16 md:h-14 px-4 py-3 hover:bg-red-50 focus:bg-red-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-red-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Site industriel"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Usine, entrep√¥t, atelier"})]})]})}),e.jsx(g,{value:"terrain",className:"h-16 md:h-14 px-4 py-3 hover:bg-green-50 focus:bg-green-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("svg",{className:"w-4 h-4 text-green-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 21v-7a1 1 0 00-1-1h-4a1 1 0 00-1 1v7"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 9h1m0 0h1m-1 0v1m0-1V8"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Terrain nu"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Terrain √† b√¢tir, construction future"})]})]})})]})]}),e.jsx(k,{className:"mb-0"})]})}),t.watch("typeProjet")==="terrain"&&e.jsx("div",{className:"md:col-span-2",children:e.jsx(v,{control:t.control,name:"terrainViabilise",render:({field:s})=>e.jsxs(y,{className:"space-y-1.5",children:[e.jsxs(N,{className:"text-sm md:text-base font-semibold text-gray-800 flex items-center gap-2 mb-1.5",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Le terrain est-il viabilis√© ? *"]}),e.jsx("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200 mb-3",children:e.jsx("p",{className:"text-sm text-green-800",children:"Un terrain viabilis√© dispose d√©j√† des acc√®s aux r√©seaux (eau, √©lectricit√©, assainissement). Cela impacte le co√ªt et le d√©lai de raccordement."})}),e.jsx(w,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx("div",{onClick:()=>s.onChange(!0),className:`
                            relative cursor-pointer rounded-xl p-4 border-2 transition-all duration-200 
                            ${s.value===!0?"border-green-500 bg-green-50 shadow-md":"border-gray-300 bg-white hover:border-green-300"}
                          `,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-green-500 flex items-center justify-center",children:s.value===!0&&e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Oui, viabilis√©"}),e.jsx("div",{className:"text-xs text-gray-600",children:"R√©seaux d√©j√† pr√©sents"})]})]})}),e.jsx("div",{onClick:()=>s.onChange(!1),className:`
                            relative cursor-pointer rounded-xl p-4 border-2 transition-all duration-200 
                            ${s.value===!1?"border-orange-500 bg-orange-50 shadow-md":"border-gray-300 bg-white hover:border-orange-300"}
                          `,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-orange-500 flex items-center justify-center",children:s.value===!1&&e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Non viabilis√©"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Aucun r√©seau pr√©sent"})]})]})})]})}),e.jsx(k,{})]})})}),e.jsx(v,{control:t.control,name:"typeAlimentation",render:({field:s})=>e.jsxs(y,{className:"space-y-1.5",children:[e.jsxs(N,{className:"text-sm md:text-base font-semibold text-gray-800 mb-1.5",children:[e.jsx("span",{className:"text-blue-600",children:"Type d'alimentation"})," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("div",{onClick:()=>s.onChange("monophase"),className:`
                      relative cursor-pointer rounded-xl p-4 border-2 transition-all duration-200 
                      ${s.value==="monophase"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-300 bg-white hover:border-blue-300 hover:bg-blue-25"}
                    `,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-blue-500 flex items-center justify-center",children:s.value==="monophase"&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Monophas√©"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Habitations standard (3-12 kVA)"})]})]})}),e.jsx("div",{onClick:()=>s.onChange("triphase"),className:`
                      relative cursor-pointer rounded-xl p-4 border-2 transition-all duration-200 
                      ${s.value==="triphase"?"border-blue-500 bg-blue-50 shadow-md":"border-gray-300 bg-white hover:border-blue-300 hover:bg-blue-25"}
                    `,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-blue-500 flex items-center justify-center",children:s.value==="triphase"&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Triphas√©"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Puissances √©lev√©es (12-36 kVA)"})]})]})}),e.jsx("div",{onClick:()=>s.onChange("inconnu"),className:`
                      relative cursor-pointer rounded-xl p-4 border-2 transition-all duration-200 
                      ${s.value==="inconnu"||!s.value?"border-orange-500 bg-orange-50 shadow-md":"border-gray-300 bg-white hover:border-orange-300 hover:bg-orange-25"}
                    `,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-orange-500 flex items-center justify-center",children:(s.value==="inconnu"||!s.value)&&e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"Je ne connais pas ma puissance"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Nous vous conseillerons selon votre projet"})]})]})})]}),e.jsx(k,{})]})}),t.watch("typeAlimentation")&&t.watch("typeAlimentation")!=="inconnu"&&e.jsx(v,{control:t.control,name:"puissance",render:({field:s})=>e.jsxs(y,{className:"space-y-3",children:[e.jsxs(N,{className:"text-base font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-600 rounded-full"}),"Puissance demand√©e (kVA) *",e.jsx("div",{className:"ml-2 w-6 h-6 md:w-5 md:h-5 flex items-center justify-center rounded-full bg-blue-100 hover:bg-blue-200 transition-all duration-200 cursor-help touch-manipulation",title:"Aide pour choisir la puissance selon votre logement",children:e.jsx("svg",{viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3 text-blue-600",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})]}),t.watch("typeAlimentation")==="monophase"&&e.jsxs(J,{onValueChange:s.onChange,value:s.value,children:[e.jsx(w,{children:e.jsx(G,{className:"h-14 md:h-12 bg-white border-2 border-gray-300 rounded-xl shadow-sm hover:border-blue-500 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 transition-all duration-200 text-gray-700 font-medium touch-manipulation",children:e.jsx(Y,{placeholder:"Choisissez votre puissance",className:"text-gray-500"})})}),e.jsxs(U,{className:"bg-white border-2 border-gray-200 rounded-2xl shadow-2xl max-h-80 overflow-y-auto",children:[e.jsx(g,{value:"3",className:"h-16 md:h-14 px-4 py-3 hover:bg-blue-50 focus:bg-blue-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"3 kVA"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Studio/T1"})]})]})}),e.jsx(g,{value:"6",className:"h-16 md:h-14 px-4 py-3 hover:bg-blue-50 focus:bg-blue-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"6 kVA"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Appartement T2/T3"})]})]})}),e.jsx(g,{value:"9",className:"h-16 md:h-14 px-4 py-3 hover:bg-blue-50 focus:bg-blue-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"9 kVA"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Maison T4/T5"})]})]})}),e.jsx(g,{value:"12",className:"h-16 md:h-14 px-4 py-3 hover:bg-blue-50 focus:bg-blue-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"12 kVA"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Grande maison"})]})]})})]})]}),t.watch("typeAlimentation")==="triphase"&&e.jsxs(J,{onValueChange:s.onChange,value:s.value,children:[e.jsx(w,{children:e.jsx(G,{className:"h-14 md:h-12 bg-white border-2 border-gray-300 rounded-xl shadow-sm hover:border-blue-500 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 transition-all duration-200 text-gray-700 font-medium touch-manipulation",children:e.jsx(Y,{placeholder:"Choisissez votre puissance",className:"text-gray-500"})})}),e.jsxs(U,{className:"bg-white border-2 border-gray-200 rounded-2xl shadow-2xl max-h-80 overflow-y-auto",children:[e.jsx(g,{value:"12",className:"h-16 md:h-14 px-4 py-3 hover:bg-green-50 focus:bg-green-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-green-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"12 kVA"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Grande maison"})]})]})}),e.jsx(g,{value:"18",className:"h-16 md:h-14 px-4 py-3 hover:bg-green-50 focus:bg-green-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-green-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"18 kVA"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Tr√®s grande maison"})]})]})}),e.jsx(g,{value:"24",className:"h-16 md:h-14 px-4 py-3 hover:bg-orange-50 focus:bg-orange-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-orange-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"24 kVA"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Usage intensif"})]})]})}),e.jsx(g,{value:"36",className:"h-16 md:h-14 px-4 py-3 hover:bg-purple-50 focus:bg-purple-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-purple-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"36 kVA"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Usage professionnel"})]})]})}),e.jsx(g,{value:"36-tarif-jaune",className:"h-16 md:h-14 px-4 py-3 hover:bg-yellow-50 focus:bg-yellow-50 cursor-pointer border-l-4 border-yellow-400",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"36 kVA - Tarif jaune"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Usage professionnel intensif"})]}),e.jsx("span",{className:"px-2 py-1 text-xs font-bold text-yellow-800 bg-yellow-200 rounded-full",children:"JAUNE"})]})})]})]}),e.jsx(k,{})]})})]})]})]}),p=()=>e.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-sm border border-gray-100 p-4 md:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2 tracking-tight",children:"Validation de votre Raccordement Enedis"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600",children:"V√©rifiez vos informations avant envoi de la demande"}),e.jsx("div",{className:"w-16 h-0.5 bg-gradient-to-r from-blue-600 to-red-600 mt-2 rounded-full"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(_,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"R√©capitulatif de votre demande"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),"Informations personnelles"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Nom complet:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[t.getValues("prenom")," ",t.getValues("nom")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Type de client:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800 capitalize",children:t.getValues("clientType")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("email")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"T√©l√©phone:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("phone")})]}),t.getValues("raisonSociale")&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Entreprise:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("raisonSociale")})]}),t.getValues("siren")&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"SIREN:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("siren")})]}),t.getValues("nomCollectivite")&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Collectivit√©:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("nomCollectivite")})]}),t.getValues("sirenCollectivite")&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"SIREN Collectivit√©:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("sirenCollectivite")})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),"Adresse du projet"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Adresse:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("adresseProjet")})]}),t.getValues("complementAdresseProjet")&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Compl√©ment:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("complementAdresseProjet")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Code postal:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("codePostalProjet")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ville:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("villeProjet")})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full"}),"D√©tails du raccordement"]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Type de raccordement:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800 capitalize",children:t.getValues("typeRaccordement")==="autre"?t.getValues("autreTypeRaccordement")||"Autre":t.getValues("typeRaccordement")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Type de projet:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800 capitalize",children:t.getValues("typeProjet")})]}),t.getValues("typeAlimentation")!=="inconnu"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Type d'alimentation:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800 capitalize",children:t.getValues("typeAlimentation")})]}),t.getValues("typeAlimentation")!=="inconnu"&&t.getValues("puissance")&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Puissance demand√©e:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[t.getValues("puissance")," kVA"]})]}),t.getValues("typeProjet")==="terrain"&&t.getValues("terrainViabilise")!==void 0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Terrain viabilis√©:"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.getValues("terrainViabilise")?"Oui":"Non"})]})]})]}),t.getValues("adresseFacturationDifferente")&&t.getValues("adresseFacturation")&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-5 border border-orange-200/30 shadow-sm",children:[e.jsxs("h4",{className:"font-semibold text-orange-900 mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center shadow-sm",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),"üí≥ Adresse de facturation"]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200",children:e.jsx("p",{className:"text-sm font-bold text-purple-900",children:t.getValues("adresseFacturation")})})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(v,{control:t.control,name:"consentementTraitement",render:({field:s})=>e.jsxs(y,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-4 border-2 border-gray-200 rounded-lg bg-blue-50/30",children:[e.jsx(w,{children:e.jsx(Ne,{checked:s.value||!1,onCheckedChange:l=>{s.onChange(l===!0)},className:"mt-1 h-5 w-5 border-2 border-blue-600 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(N,{className:"text-sm font-semibold text-gray-900 leading-relaxed",children:[e.jsx("span",{className:"text-blue-600",children:"J'accepte les conditions g√©n√©rales et la politique de confidentialit√©"}),e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Je souhaite que la prestation d√©bute avant l'expiration du d√©lai de r√©tractation l√©gale."})]})]}),e.jsx(k,{})]})})})]});return e.jsxs(e.Fragment,{children:[e.jsxs(xe,{children:[e.jsx("title",{children:"Demande de Raccordement Enedis | Dossier & Suivi"}),e.jsx("meta",{name:"description",content:"Nous g√©rons votre demande de raccordement Enedis de A √† Z. Dossiers, documents et suivi jusqu'√† validation."}),e.jsx("link",{rel:"canonical",href:"https://www.demande-raccordement.fr/raccordement-enedis"}),e.jsx("meta",{name:"robots",content:"index, follow"}),e.jsx("script",{type:"application/ld+json",children:`
          {
            "@context": "https://schema.org",
            "@type": "Service",
            "name": "Demande de Raccordement Enedis",
            "serviceType": "Raccordement √âlectrique Enedis",
            "description": "Service de gestion compl√®te des demandes de raccordement √©lectrique Enedis. Dossiers, documents et suivi personnalis√© jusqu'√† validation.",
            "provider": {
              "@type": "Organization",
              "name": "demande-raccordement.fr",
              "url": "https://www.demande-raccordement.fr/"
            },
            "areaServed": {
              "@type": "Country",
              "name": "France"
            }
          }
        `}),e.jsx("script",{type:"application/ld+json",children:`
          {
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [
              {
                "@type": "ListItem",
                "position": 1,
                "name": "Accueil",
                "item": "https://www.demande-raccordement.fr/"
              },
              {
                "@type": "ListItem",
                "position": 2,
                "name": "Raccordement Enedis",
                "item": "https://www.demande-raccordement.fr/raccordement-enedis"
              }
            ]
          }
        `})]}),e.jsxs("div",{className:`min-h-screen py-8 sm:py-12 px-4 main-form-container ${n?"bg-slate-50":"bg-gradient-to-br from-slate-50 via-blue-50/30 to-red-50/20"}`,children:[e.jsx(Ve,{}),e.jsxs("div",{id:"formulaire-raccordement",className:"max-w-4xl mx-auto critical-content",style:{scrollMarginTop:"100px"},children:[e.jsxs("div",{className:`bg-white/80 rounded-2xl border border-white/50 p-4 sm:p-6 mb-6 relative overflow-hidden ${n?"shadow-sm":"backdrop-blur-sm shadow-lg"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 via-white/5 to-red-600/5 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-3 shadow-inner relative",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-white to-red-600 h-3 rounded-full transition-all duration-1000 ease-out shadow-sm relative",style:{width:`${a/3*100}%`}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-2",children:[e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300 ${a>=1?"bg-blue-600 text-white shadow-md":"bg-gray-300 text-gray-500"}`,children:a>1?e.jsx(_,{className:"w-3 h-3 sm:w-4 sm:h-4"}):"1"}),e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300 ${a>=2?"bg-gray-600 text-white shadow-md border border-white sm:border-2":"bg-gray-300 text-gray-500"}`,children:a>2?e.jsx(_,{className:"w-3 h-3 sm:w-4 sm:h-4"}):"2"}),e.jsx("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300 ${a>=3?"bg-red-600 text-white shadow-md":"bg-gray-300 text-gray-500"}`,children:e.jsx(_,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsx("span",{className:`transition-colors duration-300 ${a>=1?"text-blue-700 font-medium":""}`,children:"Informations personnelles"}),e.jsx("span",{className:`transition-colors duration-300 ${a>=2?"text-gray-700 font-medium":""}`,children:"D√©tails du projet"}),e.jsx("span",{className:`transition-colors duration-300 ${a>=3?"text-red-700 font-medium":""}`,children:"Validation et envoi"})]})]})]}),e.jsx(he,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(K),className:"space-y-1 md:space-y-4 form-container",children:[a===1&&e.jsx(Me,{form:t}),a===2&&Q(),a===3&&p(),e.jsxs("div",{className:"flex justify-between items-center pt-0",children:[e.jsxs(ee,{type:"button",variant:"outline",onClick:re,disabled:a===1,className:"flex items-center gap-2 px-6 py-3 border-2 border-blue-300 text-blue-700 hover:bg-blue-50 hover:border-blue-400 transition-all duration-300 font-medium disabled:opacity-50",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Pr√©c√©dent"]}),a<3?e.jsxs(ee,{type:"button",onClick:D,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-blue-600 via-blue-700 to-blue-800 hover:from-blue-700 hover:via-blue-800 hover:to-blue-900 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] font-medium",children:["Suivant",e.jsx(pe,{className:"w-4 h-4"})]}):e.jsx(ee,{type:"submit",disabled:h||!t.watch("consentementTraitement"),onClick:async s=>{console.log("üî• Bouton cliqu√©!",{isSubmitting:h,consentement:t.watch("consentementTraitement"),formValid:t.formState.isValid,errors:t.formState.errors,allValues:t.getValues()});const l=await t.trigger();if(console.log("üìù Validation forc√©e:",l,t.formState.errors),!l){console.error("‚ùå Formulaire invalide:",t.formState.errors);return}l&&t.watch("consentementTraitement")&&(console.log("‚úÖ D√©clenchement manuel de la soumission"),t.handleSubmit(K)())},className:`flex items-center gap-2 px-10 py-3 font-bold text-white shadow-lg transition-all duration-300 transform hover:scale-[1.02] ${h||!t.watch("consentementTraitement")?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-600 via-green-700 to-green-800 hover:from-green-700 hover:via-green-800 hover:to-green-900 hover:shadow-xl"}`,children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Envoi en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Envoyer la demande"]})})]})]})}),e.jsx("div",{className:"mt-8 mb-6",children:e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-500 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Difficult√©s avec le formulaire ?"}),e.jsx("p",{className:"text-green-700 text-sm leading-relaxed mb-4",children:"Si vous rencontrez des difficult√©s pour remplir ce formulaire ou avez des questions sur votre raccordement √©lectrique, notre √©quipe d'experts est joignable pour vous assister. Nous sommes l√† pour vous accompagner dans votre d√©marche."}),e.jsx("div",{className:"flex justify-start",children:e.jsxs("a",{href:"tel:0970709570",onClick:()=>{typeof window<"u"&&Array.isArray(window.dataLayer)&&window.dataLayer.push({event:"phone_call",event_category:"engagement",event_label:"contact_phone_form_assistance"})},className:"inline-flex items-center justify-center px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors gap-2 min-h-[44px] touch-manipulation shadow-md hover:shadow-lg",children:[e.jsx(ge,{className:"w-4 h-4"}),"09 70 70 95 70 - Assistance"]})})]})]})})})]}),M&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300",onClick:()=>f(!1)}),e.jsxs("div",{className:"relative w-full max-w-md mx-auto bg-white rounded-2xl shadow-2xl transform transition-all duration-300 scale-100 animate-in slide-in-from-bottom-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-700 to-gray-800 text-white p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(be,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Centre d'Aide Raccordement"}),e.jsx("p",{className:"text-gray-200 text-sm",children:"R√©ponse sous 24h garantie"})]})]}),e.jsx("button",{onClick:()=>f(!1),className:"text-white/80 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-lg",children:e.jsx(se,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-3",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Suivi personnalis√© garanti"})]}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Notre √©quipe technique vous accompagne dans votre projet de raccordement. Posez votre question, nous vous r√©pondrons rapidement."})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),console.log("Support request:",V),f(!1),alert("Votre message a √©t√© envoy√© ! Nous vous r√©pondrons sous 24h.")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Votre nom *"}),e.jsx("input",{type:"text",required:!0,value:V.name,onChange:s=>P({...V,name:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",placeholder:"Votre nom complet"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email de contact *"}),e.jsx("input",{type:"email",required:!0,value:V.email,onChange:s=>P({...V,email:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",placeholder:"votre@email.fr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Votre question"}),e.jsx("textarea",{required:!0,rows:4,value:V.message,onChange:s=>P({...V,message:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all resize-none",placeholder:"D√©crivez votre question ou probl√®me concernant votre raccordement..."})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Annuler"}),e.jsxs("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-800 text-white rounded-lg transition-colors font-medium flex items-center justify-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),"Envoyer"]})]})]})]})]})]}),e.jsx(ve,{})]})]})}export{_e as default};
