class n{constructor(){this.lcpValue=0,this.isMonitoring=!1,this.observer=null}static getInstance(){return n.instance||(n.instance=new n),n.instance}init(){this.isMonitoring||typeof window>"u"||(this.isMonitoring=!0,this.startLCPMonitoring(),this.optimizeCriticalPath())}startLCPMonitoring(){if("PerformanceObserver"in window){this.observer=new PerformanceObserver(e=>{const i=e.getEntries(),t=i[i.length-1];t&&(this.lcpValue=t.startTime,this.reportLCPMetric({value:this.lcpValue,element:t.element,timestamp:Date.now()}))});try{this.observer.observe({entryTypes:["largest-contentful-paint"]})}catch{console.warn("LCP monitoring not supported")}}}reportLCPMetric(e){const i=e.value<2500,t=e.value>=2500&&e.value<4e3;e.value>=4e3,typeof window<"u"&&"gtag"in window&&window.gtag("event","web_vitals",{name:"LCP",value:Math.round(e.value),event_category:"Web Vitals",event_label:i?"good":t?"needs-improvement":"poor"})}optimizeCriticalPath(){document.querySelectorAll("[data-lcp-target]").forEach(t=>{if(t.setAttribute("data-priority","high"),t.tagName==="IMG"){const o=t;o.loading==="lazy"&&(o.loading="eager")}});const i=document.querySelector(".hero-section");i&&i.setAttribute("data-optimized","lcp")}getLCPValue(){return this.lcpValue}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.isMonitoring=!1}}const s=n.getInstance();typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>s.init()):s.init());export{s as lcpMonitor};
