import{u as C,r as i,j as e,H as _,o as k,w as E,P as p,B as x,M as R,a4 as l,A as P}from"./index-DIWzPlq1.js";import{C as g,a as j,b,d as N}from"./card-Dpw8SMXC.js";import{D as I}from"./download-ThbBIMyn.js";function V({}){const[v,u]=C(),[c,h]=i.useState(""),[D,w]=i.useState(null),d=i.useRef(!1);i.useEffect(()=>{window.scrollTo(0,0)},[]);const f=(s,r)=>{const a=`purchase_conversion_${s}`;if(typeof sessionStorage<"u"&&sessionStorage.getItem(a)){console.log("â„¹ï¸ Purchase conversion already fired for",s);return}let n="",m="";typeof sessionStorage<"u"&&(n=sessionStorage.getItem("ec_email")||"",m=sessionStorage.getItem("ec_phone")||"",sessionStorage.removeItem("ec_email"),sessionStorage.removeItem("ec_phone")),typeof window<"u"&&window.trackPurchase&&(window.trackPurchase(s,n,m),console.log("ðŸŽ¯ Google Ads: purchase conversion fired for",s),typeof sessionStorage<"u"&&sessionStorage.setItem(a,"true")),w({transaction_id:s,value:r||129.8,currency:"EUR",items:[{item_id:"raccordement-enedis",item_name:"Service de raccordement Enedis",category:"Services",quantity:1,price:r||129.8}]})};i.useEffect(()=>{const s=new URLSearchParams(window.location.search),r=s.get("reference")||s.get("ref"),a=s.get("session_id"),n=s.get("amount");if(!d.current){if(r){d.current=!0,h(r),f(r,n?parseFloat(n):void 0);return}a&&(d.current=!0,(async()=>{try{console.log("ðŸ” RÃ©cupÃ©ration des dÃ©tails de la session Stripe:",a);const o=await fetch(`/api/stripe-session/${a}`),t=await o.json();o.ok&&t.success&&t.referenceNumber?(console.log("âœ… RÃ©fÃ©rence trouvÃ©e via session_id:",t.referenceNumber),h(t.referenceNumber),t.paymentStatus==="paid"&&f(t.referenceNumber,t.amount)):console.error("âŒ Impossible de rÃ©cupÃ©rer la rÃ©fÃ©rence depuis la session:",t.message)}catch(o){console.error("âŒ Erreur lors de la rÃ©cupÃ©ration de la session Stripe:",o)}})())}},[v]);const y=()=>{l("download","receipt",c),console.log("Download receipt for:",c)},S=()=>{l("contact","support","phone")};return e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsx("title",{children:"Merci pour votre commande - Raccordement Enedis confirmÃ©"}),e.jsx("meta",{name:"description",content:"Votre demande de raccordement Enedis a Ã©tÃ© confirmÃ©e. Suivez l'avancement de votre dossier."}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-white",children:e.jsx("div",{className:"container mx-auto px-4 py-6 md:py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6",children:e.jsx(k,{className:"w-8 h-8 md:w-12 md:h-12 text-white"})}),e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 mb-3 md:mb-4 px-2",children:"Merci pour votre commande !"}),e.jsx("p",{className:"text-lg md:text-xl text-gray-600 mb-2 px-2",children:"Votre demande de raccordement Enedis a Ã©tÃ© confirmÃ©e"}),c&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 md:p-4 mx-4 md:mx-auto max-w-md",children:e.jsxs("p",{className:"text-base md:text-lg font-semibold text-blue-600",children:["RÃ©fÃ©rence : ",c]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 mb-8 md:mb-12",children:[e.jsxs(g,{className:"shadow-lg",children:[e.jsx(j,{children:e.jsxs(b,{className:"flex items-center text-xl",children:[e.jsx(E,{className:"w-6 h-6 mr-3 text-blue-600"}),"Prochaines Ã©tapes"]})}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Confirmation par email"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Vous recevrez un email de confirmation dans les prochaines minutes"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"2"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Traitement du dossier"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Notre Ã©quipe traite votre demande sous 24-48h ouvrables"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"3"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Coordination Enedis"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Nous coordonnons directement avec Enedis pour votre raccordement"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"4"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Planification des travaux"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Enedis vous contacte pour planifier l'intervention"})]})]})]})]}),e.jsxs(g,{className:"shadow-lg",children:[e.jsx(j,{children:e.jsxs(b,{className:"flex items-center text-xl",children:[e.jsx(p,{className:"w-6 h-6 mr-3 text-green-600"}),"Contact & Documents"]})}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"ReÃ§u de paiement"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"TÃ©lÃ©chargez votre reÃ§u de paiement pour vos dossiers"}),e.jsxs(x,{onClick:y,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"TÃ©lÃ©charger le reÃ§u"]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Besoin d'aide ?"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Notre Ã©quipe est disponible pour rÃ©pondre Ã  vos questions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("a",{href:"tel:0970709570",onClick:S,className:"flex items-center text-green-600 hover:text-green-700 font-medium",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"09 70 70 95 70"]}),e.jsxs("a",{href:"mailto:support@demande-raccordement.fr",className:"flex items-center text-green-600 hover:text-green-700 font-medium",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"support@demande-raccordement.fr"]})]})]}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsx("p",{children:"Horaires : Lundi-Vendredi 9h-18h"}),e.jsx("p",{children:"RÃ©ponse garantie sous 24h"})]})]})]})]}),e.jsx("div",{className:"text-center space-y-4",children:e.jsxs("div",{className:"p-4 md:p-6 bg-gray-50 rounded-lg mx-2 md:mx-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Vous avez d'autres projets ?"}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm md:text-base",children:"Profitez de notre expertise pour tous vos besoins de raccordement Ã©lectrique"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[e.jsxs(x,{onClick:()=>{l("new_request","conversion","thank_you_page"),u("/raccordement-enedis")},variant:"outline",className:"w-full sm:w-auto","data-testid":"button-new-request",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Nouvelle demande"]}),e.jsx(x,{onClick:()=>{l("return_home","navigation","thank_you_page"),u("/")},variant:"ghost",className:"w-full sm:w-auto","data-testid":"button-return-home",children:"Retour Ã  l'accueil"})]})]})})]})})})]})}export{V as default};
