import{aA as Y,ar as H,r as s,j as d,as as V,at as W,aI as q,au as P,av as v,az as J}from"./index-D44dwzfe.js";import{u as Q}from"./index-CDqiFq2T.js";var A="rovingFocusGroup.onEntryFocus",X={bubbles:!1,cancelable:!0},b="RovingFocusGroup",[_,G,Z]=Y(b),[$,le]=H(b,[Z]),[ee,te]=$(b),M=s.forwardRef((e,t)=>d.jsx(_.Provider,{scope:e.__scopeRovingFocusGroup,children:d.jsx(_.Slot,{scope:e.__scopeRovingFocusGroup,children:d.jsx(oe,{...e,ref:t})})}));M.displayName=b;var oe=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:r,loop:F=!1,dir:g,currentTabStopId:R,defaultCurrentTabStopId:w,onCurrentTabStopIdChange:m,onEntryFocus:a,preventScrollOnEntryFocus:E=!1,...C}=e,p=s.useRef(null),I=V(t,p),n=Q(g),[l=null,S]=W({prop:R,defaultProp:w,onChange:m}),[u,i]=s.useState(!1),T=q(a),L=G(o),x=s.useRef(!1),[j,y]=s.useState(0);return s.useEffect(()=>{const c=p.current;if(c)return c.addEventListener(A,T),()=>c.removeEventListener(A,T)},[T]),d.jsx(ee,{scope:o,orientation:r,dir:n,loop:F,currentTabStopId:l,onItemFocus:s.useCallback(c=>S(c),[S]),onItemShiftTab:s.useCallback(()=>i(!0),[]),onFocusableItemAdd:s.useCallback(()=>y(c=>c+1),[]),onFocusableItemRemove:s.useCallback(()=>y(c=>c-1),[]),children:d.jsx(P.div,{tabIndex:u||j===0?-1:0,"data-orientation":r,...C,ref:I,style:{outline:"none",...e.style},onMouseDown:v(e.onMouseDown,()=>{x.current=!0}),onFocus:v(e.onFocus,c=>{const k=!x.current;if(c.target===c.currentTarget&&k&&!u){const D=new CustomEvent(A,X);if(c.currentTarget.dispatchEvent(D),!D.defaultPrevented){const h=L().filter(f=>f.focusable),U=h.find(f=>f.active),B=h.find(f=>f.id===l),z=[U,B,...h].filter(Boolean).map(f=>f.ref.current);K(z,E)}}x.current=!1}),onBlur:v(e.onBlur,()=>i(!1))})})}),N="RovingFocusGroupItem",O=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:r=!0,active:F=!1,tabStopId:g,...R}=e,w=J(),m=g||w,a=te(N,o),E=a.currentTabStopId===m,C=G(o),{onFocusableItemAdd:p,onFocusableItemRemove:I}=a;return s.useEffect(()=>{if(r)return p(),()=>I()},[r,p,I]),d.jsx(_.ItemSlot,{scope:o,id:m,focusable:r,active:F,children:d.jsx(P.span,{tabIndex:E?0:-1,"data-orientation":a.orientation,...R,ref:t,onMouseDown:v(e.onMouseDown,n=>{r?a.onItemFocus(m):n.preventDefault()}),onFocus:v(e.onFocus,()=>a.onItemFocus(m)),onKeyDown:v(e.onKeyDown,n=>{if(n.key==="Tab"&&n.shiftKey){a.onItemShiftTab();return}if(n.target!==n.currentTarget)return;const l=se(n,a.orientation,a.dir);if(l!==void 0){if(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)return;n.preventDefault();let u=C().filter(i=>i.focusable).map(i=>i.ref.current);if(l==="last")u.reverse();else if(l==="prev"||l==="next"){l==="prev"&&u.reverse();const i=u.indexOf(n.currentTarget);u=a.loop?ce(u,i+1):u.slice(i+1)}setTimeout(()=>K(u))}})})})});O.displayName=N;var re={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ne(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function se(e,t,o){const r=ne(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return re[r]}function K(e,t=!1){const o=document.activeElement;for(const r of e)if(r===o||(r.focus({preventScroll:t}),document.activeElement!==o))return}function ce(e,t){return e.map((o,r)=>e[(t+r)%e.length])}var fe=M,de=O;function me(){const[e,t]=s.useState(!1);return s.useEffect(()=>{const o=()=>{t(window.innerWidth<768)};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),e}export{de as I,fe as R,le as c,me as u};
