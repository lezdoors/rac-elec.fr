const g="AW-16683623620",d={FORM_START:"xhTDCODCy6gbEMTJr5M-",FORM_SUBMIT:"20wfCK-NyqgbEMTJr5M-",PURCHASE:"b5XPCPfuirYbEMTJr5M-"},m=e=>{const t=e.toLowerCase().trim();let r=0;for(let o=0;o<t.length;o++){const i=t.charCodeAt(o);r=(r<<5)-r+i,r=r&r}return Math.abs(r).toString(36)},c=(e,t)=>`tracking_${e}_${t}`,u=e=>typeof sessionStorage>"u"?!1:sessionStorage.getItem(e)==="true",f=e=>{typeof sessionStorage<"u"&&sessionStorage.setItem(e,"true")},l=(e,t={})=>{typeof window>"u"||(window.gtag&&window.gtag("event","conversion",{send_to:`${g}/${e}`,...t}),Array.isArray(window.dataLayer)&&window.dataLayer.push({event:t.event_name||"conversion",send_to:`${g}/${e}`,...t}))},w=(e,t)=>{if(typeof window>"u")return!1;if(!e||!e.includes("@"))return console.warn("‚ö†Ô∏è trackFormStart: valid email required"),!1;const r=m(e),o=c("form_start",r);return u(o)?(console.log(`‚ÑπÔ∏è form_start already fired for ${r} (skipped)`),!1):(f(o),l(d.FORM_START,{event_name:"form_start",user_data:{email:e.toLowerCase().trim(),phone_number:(t==null?void 0:t.replace(/\s/g,""))||void 0}}),console.log(`‚úÖ form_start fired [dedupe: ${r}]`),!0)},S=(e,t,r)=>{if(typeof window>"u")return!1;if(!e)return console.warn("‚ö†Ô∏è trackFormSubmit: reference required"),!1;const o=c("form_submit",e);return u(o)?(console.log(`‚ÑπÔ∏è form_submit already fired for ${e} (skipped)`),!1):(f(o),t&&sessionStorage.setItem("ec_email",t.toLowerCase().trim()),r&&sessionStorage.setItem("ec_phone",r.replace(/\s/g,"")),l(d.FORM_SUBMIT,{event_name:"form_submit",transaction_id:e,user_data:{email:(t==null?void 0:t.toLowerCase().trim())||void 0,phone_number:(r==null?void 0:r.replace(/\s/g,""))||void 0}}),console.log(`‚úÖ form_submit fired [ref: ${e}]`),!0)},_=()=>{if(typeof window>"u")return null;const e=localStorage.getItem("gclid");return e||new URLSearchParams(window.location.search).get("gclid")},p=(e,t=129.8,r,o)=>{if(typeof window>"u")return!1;if(!e)return console.warn("‚ö†Ô∏è trackPurchase: reference required"),!1;const i=c("purchase",e);if(u(i))return console.log(`‚ÑπÔ∏è purchase already fired for ${e} (skipped)`),!1;f(i);let s=r,n=o;typeof sessionStorage<"u"&&(s||(s=sessionStorage.getItem("ec_email")||void 0),n||(n=sessionStorage.getItem("ec_phone")||void 0),sessionStorage.removeItem("ec_email"),sessionStorage.removeItem("ec_phone"));const a=_();return console.log("üîç PURCHASE CONVERSION:",{reference:e,value:t,gclid:a,timestamp:new Date().toISOString()}),l(d.PURCHASE,{event_name:"purchase",transaction_id:e,value:t,currency:"EUR",gclid:a||void 0,user_data:{email:(s==null?void 0:s.toLowerCase().trim())||void 0,phone_number:(n==null?void 0:n.replace(/\s/g,""))||void 0}}),console.log(`‚úÖ purchase fired [ref: ${e}, ‚Ç¨${t}, gclid: ${a||"none"}]`),!0},v=(e,t,r,o)=>{typeof window<"u"&&window.dataLayer&&window.dataLayer.push({event:"custom_event",event_action:e,event_category:t,event_label:r,event_value:o})};export{S as a,p as b,v as c,w as t};
